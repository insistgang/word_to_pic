<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>长三角低空物流智能指挥中心</title>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/echarts-gl@2.0.9/dist/echarts-gl.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Orbitron', 'Microsoft YaHei', sans-serif;
            background: #000;
            color: #fff;
            overflow: hidden;
            position: relative;
        }
        
        /* 动态粒子背景 */
        #particles-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background: radial-gradient(ellipse at center, #1e3c72 0%, #2a5298 50%, #000 100%);
        }
        
        /* 扫描线效果 */
        .scanlines::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                transparent 50%,
                rgba(0, 255, 255, 0.03) 50%
            );
            background-size: 100% 4px;
            z-index: 1;
            pointer-events: none;
            animation: scanlines 8s linear infinite;
        }
        
        @keyframes scanlines {
            0% { background-position: 0 0; }
            100% { background-position: 0 10px; }
        }
        
        /* 顶部状态栏 */
        .status-bar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 60px;
            background: linear-gradient(180deg, rgba(0,20,40,0.9) 0%, rgba(0,40,80,0.3) 100%);
            border-bottom: 2px solid #00ffff;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 30px;
            z-index: 1000;
            backdrop-filter: blur(10px);
        }
        
        .system-title {
            font-size: 1.5em;
            font-weight: 900;
            color: #00ffff;
            text-shadow: 0 0 20px #00ffff;
            letter-spacing: 3px;
        }
        
        .status-info {
            display: flex;
            gap: 30px;
            align-items: center;
        }
        
        .status-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
        }
        
        .status-label {
            font-size: 0.8em;
            color: #00ffff;
            opacity: 0.8;
        }
        
        .status-value {
            font-size: 1.1em;
            font-weight: 700;
            color: #fff;
            text-shadow: 0 0 10px #00ffff;
        }
        
        /* 主要容器 */
        .main-container {
            position: fixed;
            top: 60px;
            left: 0;
            right: 0;
            bottom: 0;
            display: grid;
            grid-template-columns: 300px 1fr 350px;
            grid-template-rows: 1fr 300px;
            gap: 2px;
            background: rgba(0, 255, 255, 0.1);
            padding: 2px;
        }
        
        /* 通用面板样式 */
        .panel {
            background: linear-gradient(135deg, rgba(0,20,40,0.8) 0%, rgba(0,40,80,0.4) 100%);
            border: 1px solid rgba(0, 255, 255, 0.3);
            border-radius: 10px;
            padding: 20px;
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }
        
        .panel::before {
            content: "";
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, #00ffff, #ff00ff, #ffff00, #00ffff);
            border-radius: 10px;
            opacity: 0;
            z-index: -1;
            transition: opacity 0.3s ease;
            animation: borderRotate 3s linear infinite;
        }
        
        .panel:hover::before {
            opacity: 0.7;
        }
        
        @keyframes borderRotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .panel-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(0, 255, 255, 0.3);
        }
        
        .panel-title {
            font-size: 1.1em;
            font-weight: 700;
            color: #00ffff;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .panel-status {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .status-indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #00ff00;
            box-shadow: 0 0 10px #00ff00;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.7; transform: scale(1.2); }
        }
        
        /* 左侧面板 */
        .left-panel {
            grid-row: 1 / 3;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        /* 中央主面板 */
        .center-main {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        /* 右侧面板 */
        .right-panel {
            grid-row: 1 / 3;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        /* 底部面板 */
        .bottom-panel {
            grid-column: 2;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        /* KPI网格 */
        .kpi-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .kpi-item {
            background: linear-gradient(135deg, rgba(0, 255, 255, 0.1) 0%, rgba(0, 255, 255, 0.05) 100%);
            border: 1px solid rgba(0, 255, 255, 0.3);
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .kpi-item::after {
            content: "";
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(0, 255, 255, 0.4), transparent);
            transition: left 0.5s ease;
        }
        
        .kpi-item:hover::after {
            left: 100%;
        }
        
        .kpi-value {
            font-size: 1.8em;
            font-weight: 900;
            color: #00ffff;
            text-shadow: 0 0 15px #00ffff;
            margin-bottom: 5px;
            font-family: 'Orbitron', monospace;
        }
        
        .kpi-label {
            font-size: 0.8em;
            color: #fff;
            opacity: 0.8;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        /* 图表容器 */
        .chart-container {
            flex: 1;
            position: relative;
            min-height: 200px;
        }
        
        /* 3D图表容器 */
        .chart-3d {
            height: 100%;
            width: 100%;
        }
        
        /* 数据表格 */
        .data-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.9em;
        }
        
        .data-table th,
        .data-table td {
            padding: 8px 12px;
            text-align: left;
            border-bottom: 1px solid rgba(0, 255, 255, 0.2);
        }
        
        .data-table th {
            background: rgba(0, 255, 255, 0.1);
            color: #00ffff;
            font-weight: 700;
            text-transform: uppercase;
            font-size: 0.8em;
        }
        
        .data-table tr:hover {
            background: rgba(0, 255, 255, 0.05);
        }
        
        /* 警告提示 */
        .alert-panel {
            background: linear-gradient(135deg, rgba(255, 0, 0, 0.2) 0%, rgba(255, 0, 0, 0.1) 100%);
            border: 1px solid rgba(255, 0, 0, 0.5);
            border-radius: 8px;
            padding: 15px;
            margin-top: 10px;
        }
        
        .alert-title {
            color: #ff4444;
            font-weight: 700;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .alert-list {
            list-style: none;
            font-size: 0.9em;
        }
        
        .alert-item {
            padding: 5px 0;
            border-left: 3px solid #ff4444;
            padding-left: 10px;
            margin-bottom: 5px;
        }
        
        /* 数据关联分析面板 */
        .correlation-panel {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid #00ffff;
            border-radius: 8px;
            padding: 12px;
            backdrop-filter: blur(5px);
        }
        
        .correlation-item {
            background: rgba(0, 50, 100, 0.3);
            border: 1px solid rgba(0, 255, 255, 0.3);
            border-radius: 6px;
            padding: 10px;
            margin-bottom: 8px;
            transition: all 0.3s ease;
        }
        
        .correlation-item:hover {
            background: rgba(0, 100, 200, 0.4);
            border-color: #00ffff;
            transform: translateX(5px);
        }
        
        .correlation-title {
            font-size: 12px;
            color: #00ffff;
            margin-bottom: 5px;
            font-weight: bold;
        }
        
        .correlation-value {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 3px;
            text-shadow: 0 0 10px currentColor;
        }
        
        .correlation-desc {
            font-size: 10px;
            color: #bdc3c7;
            opacity: 0.8;
        }
        
        /* 实时数据流 */
        .data-stream {
            font-family: 'Orbitron', monospace;
            font-size: 0.8em;
            color: #00ff00;
            height: 100px;
            overflow-y: auto;
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid #00ff00;
            border-radius: 5px;
            padding: 10px;
        }
        
        .data-stream-line {
            margin-bottom: 3px;
            opacity: 0;
            animation: dataFlow 0.5s ease forwards;
        }
        
        @keyframes dataFlow {
            from { opacity: 0; transform: translateX(-20px); }
            to { opacity: 1; transform: translateX(0); }
        }
        
        /* 地图容器 */
        .map-container {
            height: 300px;
            border: 1px solid rgba(0, 255, 255, 0.3);
            border-radius: 8px;
            overflow: hidden;
            position: relative;
        }
        
        /* 控制按钮 */
        .control-buttons {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        
        .control-btn {
            background: linear-gradient(135deg, rgba(0, 255, 255, 0.2) 0%, rgba(0, 255, 255, 0.1) 100%);
            border: 1px solid rgba(0, 255, 255, 0.5);
            color: #00ffff;
            padding: 8px 16px;
            border-radius: 5px;
            cursor: pointer;
            font-family: 'Orbitron', monospace;
            font-weight: 700;
            transition: all 0.3s ease;
            text-transform: uppercase;
            font-size: 0.8em;
        }
        
        .control-btn:hover {
            background: linear-gradient(135deg, rgba(0, 255, 255, 0.4) 0%, rgba(0, 255, 255, 0.2) 100%);
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.5);
            transform: translateY(-2px);
        }
        
        /* 加载动画 */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10000;
        }
        
        .loading-content {
            text-align: center;
        }
        
        .loading-spinner {
            width: 60px;
            height: 60px;
            border: 3px solid rgba(0, 255, 255, 0.3);
            border-top: 3px solid #00ffff;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* 响应式设计 */
        @media (max-width: 1400px) {
            .main-container {
                grid-template-columns: 250px 1fr 300px;
            }
        }
        
        @media (max-width: 1200px) {
            .main-container {
                grid-template-columns: 1fr;
                grid-template-rows: auto auto auto auto;
            }
            
            .left-panel,
            .right-panel {
                grid-row: auto;
            }
            
            .bottom-panel {
                grid-column: 1;
            }
        }
    </style>
</head>
<body class="scanlines">
    <!-- 粒子背景 -->
    <canvas id="particles-canvas"></canvas>
    
    <!-- 加载画面 -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <div style="color: #00ffff; font-family: 'Orbitron', monospace; font-size: 1.2em;">
                系统初始化中...
            </div>
        </div>
    </div>
    
    <!-- 状态栏 -->
    <div class="status-bar">
        <div class="system-title">长三角低空物流智能指挥中心</div>
        <div class="status-info">
            <div class="status-item">
                <div class="status-label">系统时间</div>
                <div class="status-value" id="systemTime">--:--:--</div>
            </div>
            <div class="status-item">
                <div class="status-label">连接状态</div>
                <div class="status-value">
                    <span style="color: #00ff00;">● 在线</span>
                </div>
            </div>
            <div class="status-item">
                <div class="status-label">数据延迟</div>
                <div class="status-value" id="dataLatency">12ms</div>
            </div>
            <div class="status-item">
                <div class="status-label">活跃设备</div>
                <div class="status-value" id="activeDevices">1,247</div>
            </div>
        </div>
    </div>
    
    <!-- 主要容器 -->
    <div class="main-container">
        <!-- 左侧面板 -->
        <div class="left-panel panel">
            <div class="panel-header">
                <div class="panel-title">实时监控</div>
                <div class="panel-status">
                    <div class="status-indicator"></div>
                    <span style="font-size: 0.8em; color: #00ff00;">正常</span>
                </div>
            </div>
            
            <!-- KPI指标 -->
            <div class="kpi-grid">
                <div class="kpi-item">
                    <div class="kpi-value" id="totalMarket">120亿</div>
                    <div class="kpi-label">市场规模</div>
                </div>
                <div class="kpi-item">
                    <div class="kpi-value" id="growthRate">3233%</div>
                    <div class="kpi-label">增长率</div>
                </div>
                <div class="kpi-item">
                    <div class="kpi-value" id="activeRoutes">586</div>
                    <div class="kpi-label">活跃航线</div>
                </div>
                <div class="kpi-item">
                    <div class="kpi-value" id="deliveryCount">12.5K</div>
                    <div class="kpi-label">日配送量</div>
                </div>
            </div>
            
            <!-- 实时数据流 -->
            <div class="panel-header">
                <div class="panel-title">数据流</div>
                <div class="panel-status">
                    <div class="status-indicator"></div>
                </div>
            </div>
            <div class="data-stream" id="dataStream"></div>
            
            <!-- 系统状态 -->
            <div class="panel-header">
                <div class="panel-title">系统状态</div>
            </div>
            <table class="data-table">
                <thead>
                    <tr>
                        <th>系统模块</th>
                        <th>运行状态</th>
                        <th>CPU使用率</th>
                        <th>内存占用</th>
                        <th>网络延迟</th>
                    </tr>
                </thead>
                <tbody id="systemStatus">
                    <tr>
                        <td>🚁 飞行控制系统</td>
                        <td style="color: #00ff00;">● 正常</td>
                        <td>23.4%</td>
                        <td>45.2%</td>
                        <td>12ms</td>
                    </tr>
                    <tr>
                        <td>🗺️ 路由规划引擎</td>
                        <td style="color: #00ff00;">● 正常</td>
                        <td>12.8%</td>
                        <td>34.7%</td>
                        <td>8ms</td>
                    </tr>
                    <tr>
                        <td>📊 数据处理中心</td>
                        <td style="color: #ffff00;">● 负载高</td>
                        <td>67.3%</td>
                        <td>78.9%</td>
                        <td>15ms</td>
                    </tr>
                    <tr>
                        <td>🛡️ 安全监控模块</td>
                        <td style="color: #00ff00;">● 正常</td>
                        <td>8.5%</td>
                        <td>23.1%</td>
                        <td>6ms</td>
                    </tr>
                    <tr>
                        <td>📡 通信管理系统</td>
                        <td style="color: #00ff00;">● 正常</td>
                        <td>15.6%</td>
                        <td>41.8%</td>
                        <td>9ms</td>
                    </tr>
                    <tr>
                        <td>⚠️ 预警分析系统</td>
                        <td style="color: #ff4444;">● 异常</td>
                        <td>89.2%</td>
                        <td>92.4%</td>
                        <td>28ms</td>
                    </tr>
                </tbody>
            </table>
        </div>
        
        <!-- 中央主面板 -->
        <div class="center-main">
            <!-- 3D地图 -->
            <div class="panel">
                <div class="panel-header">
                    <div class="panel-title">长三角区域3D监控</div>
                    <div class="panel-status">
                        <div class="status-indicator"></div>
                    </div>
                </div>
                <div class="chart-3d" id="map3D"></div>
                <div class="control-buttons">
                    <button class="control-btn" onclick="toggleMapView()">切换视图</button>
                    <button class="control-btn" onclick="resetMap()">重置</button>
                    <button class="control-btn" onclick="toggleAnimation()">动画</button>
                </div>
            </div>
            
            <!-- 市场趋势 -->
            <div class="panel">
                <div class="panel-header">
                    <div class="panel-title">市场趋势分析</div>
                    <div class="panel-status">
                        <div class="status-indicator"></div>
                    </div>
                </div>
                <div class="chart-container" id="marketTrendChart"></div>
            </div>
        </div>
        
        <!-- 右侧面板 -->
        <div class="right-panel panel">
            <div class="panel-header">
                <div class="panel-title">智能分析</div>
                <div class="panel-status">
                    <div class="status-indicator"></div>
                </div>
            </div>
            
            <!-- 应用场景分布 -->
            <div class="panel-header" style="margin-top: 15px;">
                <div class="panel-title">应用场景分布</div>
            </div>
            <div class="chart-container" id="applicationScenarioChart"></div>
            
            <!-- AI预测 -->
            <div class="chart-container" id="aiPredictionChart"></div>
            
            <!-- 风险评估 -->
            <div class="panel-header" style="margin-top: 15px;">
                <div class="panel-title">风险评估</div>
            </div>
            <div class="chart-container" id="riskAssessmentChart"></div>
            
            <!-- 警告面板 - 基于真实监控数据 -->
            <div class="alert-panel">
                <div class="alert-title">
                    <span>⚠️</span>
                    实时监控警告 ( <span id="alertCount">3</span> 项 )
                </div>
                <ul class="alert-list" id="alertList">
                    <li class="alert-item">【高优先级】上海区域台风蓝色预警，影响12条航线，建议暂停户外配送作业</li>
                    <li class="alert-item">【中优先级】南京江宁区3架无人机电池温度异常(68°C)，建议立即返航检修</li>
                    <li class="alert-item">【低优先级】杭州-宁波航线数据链路延迟偏高(45ms)，正在切换备用信道</li>
                    <li class="alert-item">【信息】苏州工业区订单量突增200%，建议调配5架无人机支援</li>
                </ul>
            </div>
            
            <!-- 数据关联分析面板 -->
            <div class="panel-header" style="margin-top: 15px;">
                <div class="panel-title">数据关联分析</div>
            </div>
            <div class="correlation-panel">
                <div class="correlation-item">
                    <div class="correlation-title">🔗 投资与航线关联度</div>
                    <div class="correlation-value" style="color: #2ecc71;">0.89</div>
                    <div class="correlation-desc">高相关：投资每增加1亿，航线增长15条</div>
                </div>
                <div class="correlation-item">
                    <div class="correlation-title">🔗 企业与市场关联度</div>
                    <div class="correlation-value" style="color: #f39c12;">0.76</div>
                    <div class="correlation-desc">较高相关：企业数量与市场规模强相关</div>
                </div>
                <div class="correlation-item">
                    <div class="correlation-title">🔗 医疗需求与GDP关联度</div>
                    <div class="correlation-value" style="color: #e74c3c;">0.92</div>
                    <div class="correlation-desc">极高相关：高GDP地区医疗需求更旺盛</div>
                </div>
            </div>
        </div>
        
        <!-- 底部面板 -->
        <div class="bottom-panel panel">
            <div class="panel-header">
                <div class="panel-title">实时运营数据</div>
                <div class="panel-status">
                    <div class="status-indicator"></div>
                </div>
            </div>
            <div class="chart-container" id="realtimeOperationsChart"></div>
        </div>
    </div>

    <script>
        // 全局变量
        let charts = {};
        let particlesAnimation;
        let dataStreamInterval;
        let kpiUpdateInterval;
        
        // 系统初始化
        window.addEventListener('load', function() {
            setTimeout(() => {
                document.getElementById('loadingOverlay').style.display = 'none';
                initSystem();
            }, 2000);
        });
        
        // 初始化系统
        function initSystem() {
            initParticles();
            initCharts();
            startDataStreams();
            startKPIUpdates();
            updateTime();
            setInterval(updateTime, 1000);
        }
        
        // 粒子背景系统
        function initParticles() {
            const canvas = document.getElementById('particles-canvas');
            const ctx = canvas.getContext('2d');
            
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            
            const particles = [];
            const particleCount = 100;
            
            class Particle {
                constructor() {
                    this.x = Math.random() * canvas.width;
                    this.y = Math.random() * canvas.height;
                    this.vx = (Math.random() - 0.5) * 0.5;
                    this.vy = (Math.random() - 0.5) * 0.5;
                    this.size = Math.random() * 2 + 1;
                    this.opacity = Math.random() * 0.5 + 0.2;
                }
                
                update() {
                    this.x += this.vx;
                    this.y += this.vy;
                    
                    if (this.x < 0 || this.x > canvas.width) this.vx *= -1;
                    if (this.y < 0 || this.y > canvas.height) this.vy *= -1;
                }
                
                draw() {
                    ctx.save();
                    ctx.globalAlpha = this.opacity;
                    ctx.fillStyle = '#00ffff';
                    ctx.beginPath();
                    ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                    ctx.fill();
                    ctx.restore();
                }
            }
            
            // 创建粒子
            for (let i = 0; i < particleCount; i++) {
                particles.push(new Particle());
            }
            
            // 连线效果
            function drawConnections() {
                for (let i = 0; i < particles.length; i++) {
                    for (let j = i + 1; j < particles.length; j++) {
                        const dx = particles[i].x - particles[j].x;
                        const dy = particles[i].y - particles[j].y;
                        const distance = Math.sqrt(dx * dx + dy * dy);
                        
                        if (distance < 100) {
                            ctx.save();
                            ctx.globalAlpha = (100 - distance) / 100 * 0.2;
                            ctx.strokeStyle = '#00ffff';
                            ctx.lineWidth = 1;
                            ctx.beginPath();
                            ctx.moveTo(particles[i].x, particles[i].y);
                            ctx.lineTo(particles[j].x, particles[j].y);
                            ctx.stroke();
                            ctx.restore();
                        }
                    }
                }
            }
            
            // 动画循环
            function animate() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                particles.forEach(particle => {
                    particle.update();
                    particle.draw();
                });
                
                drawConnections();
                requestAnimationFrame(animate);
            }
            
            animate();
            
            // 响应窗口大小变化
            window.addEventListener('resize', () => {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
            });
        }
        
        // 初始化所有图表
        function initCharts() {
            init3DMap();
            initMarketTrend();
            initApplicationScenario();
            initAIPrediction();
            initRiskAssessment();
            initRealtimeOperations();
        }
        
        // 3D地图 - 集成长三角真实数据
        function init3DMap() {
            const chartDom = document.getElementById('map3D');
            charts.map3D = echarts.init(chartDom);
            
            // 长三角城市数据 - 增强版，包含更详细的业务指标
            const cityData = [
                {name: '上海', value: [121.4737, 31.2304, 95], routeCount: 270, investment: 7.5, companies: 120, growthRate: 45.8, marketShare: 35.2, medicalRoutes: 95, industrialRoutes: 110},
                {name: '南京', value: [118.7969, 32.0603, 78], routeCount: 150, investment: 37.5, companies: 80, growthRate: 52.3, marketShare: 22.1, medicalRoutes: 45, industrialRoutes: 68},
                {name: '杭州', value: [120.1551, 30.2741, 82], routeCount: 120, investment: 20, companies: 60, growthRate: 48.7, marketShare: 18.5, medicalRoutes: 38, industrialRoutes: 42},
                {name: '合肥', value: [117.2272, 31.8206, 65], routeCount: 60, investment: 15, companies: 30, growthRate: 55.2, marketShare: 8.9, medicalRoutes: 18, industrialRoutes: 25},
                {name: '苏州', value: [120.6196, 31.2990, 71], routeCount: 85, investment: 18.5, companies: 45, growthRate: 41.9, marketShare: 12.6, medicalRoutes: 22, industrialRoutes: 48},
                {name: '无锡', value: [120.3055, 31.5704, 68], routeCount: 72, investment: 12.3, companies: 38, growthRate: 39.8, marketShare: 10.7, medicalRoutes: 20, industrialRoutes: 35},
                {name: '宁波', value: [121.5440, 29.8683, 63], routeCount: 58, investment: 9.8, companies: 32, growthRate: 44.1, marketShare: 8.6, medicalRoutes: 15, industrialRoutes: 28},
                {name: '常州', value: [119.9739, 31.7732, 58], routeCount: 45, investment: 8.2, companies: 25, growthRate: 37.5, marketShare: 6.7, medicalRoutes: 12, industrialRoutes: 22}
            ];
            
            const option = {
                backgroundColor: 'transparent',
                tooltip: {
                    trigger: 'item',
                    formatter: function(params) {
                        if (params.data) {
                            const city = params.data;
                            return `<strong style="color: #00ffff; font-size: 16px;">${city.name}</strong><br/><br/>
                                    🚁 <strong>航线信息</strong><br/>
                                    &nbsp;&nbsp;总航线数量: <span style="color: #00ff00;">${city.routeCount}</span> 条<br/>
                                    &nbsp;&nbsp;医疗航线: <span style="color: #e74c3c;">${city.medicalRoutes}</span> 条<br/>
                                    &nbsp;&nbsp;工业航线: <span style="color: #3498db;">${city.industrialRoutes}</span> 条<br/><br/>
                                    💰 <strong>经济指标</strong><br/>
                                    &nbsp;&nbsp;投资规模: <span style="color: #f39c12;">${city.investment}</span> 亿元<br/>
                                    &nbsp;&nbsp;市场占有率: <span style="color: #9b59b6;">${city.marketShare}</span>%<br/>
                                    &nbsp;&nbsp;年增长率: <span style="color: #2ecc71;">+${city.growthRate}</span>%<br/><br/>
                                    🏢 <strong>企业生态</strong><br/>
                                    &nbsp;&nbsp;企业数量: <span style="color: #00ffff;">${city.companies}</span> 家`;
                        }
                        return params.name + ': ' + params.value[2];
                    }
                },
                visualMap: {
                    min: 0,
                    max: 100,
                    calculable: true,
                    inRange: {
                        color: ['#004d99', '#00ffff', '#ff00ff', '#ffff00']
                    },
                    textStyle: {
                        color: '#fff'
                    },
                    left: 'left',
                    top: 'bottom'
                },
                geo3D: {
                    map: 'china',
                    environment: '#001122',
                    shading: 'realistic',
                    realisticMaterial: {
                        roughness: 0.2,
                        metalness: 0
                    },
                    postEffect: {
                        enable: true,
                        bloom: {
                            enable: true,
                            bloomIntensity: 0.1
                        }
                    },
                    light: {
                        main: {
                            intensity: 1.2,
                            shadow: true,
                            alpha: 20
                        },
                        ambient: {
                            intensity: 0.3
                        }
                    },
                    viewControl: {
                        distance: 80,
                        alpha: 40,
                        center: [120, 32, 0],
                        animation: true,
                        animationDurationUpdate: 1000
                    },
                    itemStyle: {
                        color: '#00ffff',
                        opacity: 0.8,
                        borderWidth: 1,
                        borderColor: '#00ffff'
                    },
                    emphasis: {
                        itemStyle: {
                            color: '#ff00ff',
                            opacity: 1
                        }
                    },
                    label: {
                        show: true,
                        textStyle: {
                            color: '#fff',
                            fontSize: 8,
                            backgroundColor: 'rgba(0,0,0,0.5)'
                        }
                    }
                },
                series: [
                    {
                        type: 'scatter3D',
                        coordinateSystem: 'geo3D',
                        data: cityData,
                        symbolSize: function(val) {
                            return val[2] / 5;
                        },
                        itemStyle: {
                            color: function(params) {
                                const value = params.value[2];
                                if (value > 80) return '#ff00ff';
                                if (value > 70) return '#ffff00';
                                return '#00ffff';
                            },
                            opacity: 0.9
                        },
                        emphasis: {
                            itemStyle: {
                                color: '#fff'
                            }
                        }
                    }
                ]
            };
            
            charts.map3D.setOption(option);
            
            // 3D自动旋转
            let angle = 0;
            setInterval(() => {
                angle += 0.5;
                charts.map3D.setOption({
                    geo3D: {
                        viewControl: {
                            alpha: 40 + Math.sin(angle * 0.02) * 10,
                            beta: angle * 0.5
                        }
                    }
                });
            }, 50);
        }
        
        // 生成3D数据
        function generate3DData() {
            const data = [];
            for (let i = 0; i < 50; i++) {
                for (let j = 0; j < 50; j++) {
                    const x = (i - 25) * 2;
                    const y = (j - 25) * 2;
                    const z = Math.sin(x * 0.1) * Math.cos(y * 0.1) * 20 + 
                             Math.random() * 30 + 50;
                    data.push([x, y, z]);
                }
            }
            return data;
        }
        
        // 市场趋势图 - 集成真实数据
        function initMarketTrend() {
            const chartDom = document.getElementById('marketTrendChart');
            charts.marketTrend = echarts.init(chartDom);
            
            const option = {
                backgroundColor: 'transparent',
                tooltip: {
                    trigger: 'axis',
                    axisPointer: {
                        type: 'cross'
                    },
                    formatter: function(params) {
                        let result = params[0].name + '<br/>';
                        params.forEach(param => {
                            result += param.marker + param.seriesName + ': ';
                            if (param.seriesName.includes('规模') || param.seriesName.includes('医疗')) {
                                result += param.value + ' 亿元<br/>';
                            } else if (param.seriesName.includes('增长率')) {
                                result += param.value + '%<br/>';
                            } else {
                                result += param.value + '<br/>';
                            }
                        });
                        return result;
                    }
                },
                legend: {
                    data: ['总市场规模', '同比增长率', '医疗物流市场', '工业物流市场', '商业配送市场'],
                    textStyle: {
                        color: '#fff'
                    },
                    top: 10
                },
                grid: {
                    left: '3%',
                    right: '4%',
                    bottom: '3%',
                    containLabel: true,
                    top: '60px'
                },
                xAxis: {
                    type: 'category',
                    boundaryGap: false,
                    data: ['2025', '2026', '2027', '2028', '2029', '2030'],
                    axisLine: {
                        lineStyle: {
                            color: '#00ffff'
                        }
                    },
                    axisLabel: {
                        color: '#fff'
                    }
                },
                yAxis: [
                    {
                        type: 'value',
                        name: '市场规模(亿元)',
                        axisLine: {
                            lineStyle: {
                                color: '#00ffff'
                            }
                        },
                        splitLine: {
                            lineStyle: {
                                color: 'rgba(0, 255, 255, 0.1)'
                            }
                        },
                        axisLabel: {
                            color: '#fff'
                        }
                    },
                    {
                        type: 'value',
                        name: '增长率(%)',
                        axisLine: {
                            lineStyle: {
                                color: '#ff00ff'
                            }
                        },
                        splitLine: {
                            lineStyle: {
                                color: 'rgba(255, 0, 255, 0.1)'
                            }
                        },
                        axisLabel: {
                            color: '#fff'
                        }
                    }
                ],
                series: [
                    {
                        name: '总市场规模',
                        type: 'line',
                        smooth: true,
                        data: [2.3, 3.8, 7.5, 15, 45, 120],
                        itemStyle: {
                            color: '#00ffff'
                        },
                        areaStyle: {
                            color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
                                {offset: 0, color: 'rgba(0, 255, 255, 0.3)'},
                                {offset: 1, color: 'rgba(0, 255, 255, 0.1)'}
                            ])
                        },
                        markPoint: {
                            data: [
                                {type: 'max', name: '最大值'},
                                {type: 'min', name: '最小值'}
                            ]
                        }
                    },
                    {
                        name: '同比增长率',
                        type: 'line',
                        smooth: true,
                        yAxisIndex: 1,
                        data: [65.2, 97.4, 100, 200, 167],
                        itemStyle: {
                            color: '#ff00ff'
                        },
                        lineStyle: {
                            type: 'dashed'
                        },
                        markLine: {
                            data: [
                                {type: 'average', name: '平均值'}
                            ]
                        }
                    },
                    {
                        name: '医疗物流市场',
                        type: 'line',
                        smooth: true,
                        data: [0.43, 0.67, 1.8, 4.5, 12, 25],
                        itemStyle: {
                            color: '#00ff00'
                        }
                    },
                    {
                        name: '工业物流市场',
                        type: 'line',
                        smooth: true,
                        data: [1.2, 2.1, 3.8, 7.2, 18.5, 42],
                        itemStyle: {
                            color: '#ffff00'
                        }
                    },
                    {
                        name: '商业配送市场',
                        type: 'line',
                        smooth: true,
                        data: [0.67, 1.03, 1.9, 3.3, 14.5, 53],
                        itemStyle: {
                            color: '#ff8800'
                        }
                    }
                ]
            };
            
            charts.marketTrend.setOption(option);
        }
        
        // 应用场景分布图 - 集成真实数据
        function initApplicationScenario() {
            const chartDom = document.getElementById('applicationScenarioChart');
            charts.applicationScenario = echarts.init(chartDom);
            
            // 基于现有数据的真实应用场景分布 - 增强版
            const scenarioData = [
                {
                    value: 35, 
                    name: '医疗配送', 
                    itemStyle: {color: '#e74c3c'},
                    details: {
                        marketSize: '25亿元',
                        growthRate: '55%',
                        routes: 276,
                        avgPrice: '360元/次',
                        description: '医院间药品配送、器官转运、紧急救治物资'
                    }
                },
                {
                    value: 28, 
                    name: '工业物流', 
                    itemStyle: {color: '#3498db'},
                    details: {
                        marketSize: '15.6亿元',
                        growthRate: '48%',
                        routes: 221,
                        avgPrice: '25元/票',
                        description: '电子制造、工业园区、1小时紧急调拨'
                    }
                },
                {
                    value: 20, 
                    name: '商业配送', 
                    itemStyle: {color: '#f39c12'},
                    details: {
                        marketSize: '8.2亿元',
                        growthRate: '42%',
                        routes: 158,
                        avgPrice: '15元/件',
                        description: '电商、餐饮、零售商业配送'
                    }
                },
                {
                    value: 10, 
                    name: '应急物资', 
                    itemStyle: {color: '#9b59b6'},
                    details: {
                        marketSize: '3.5亿元',
                        growthRate: '38%',
                        routes: 79,
                        avgPrice: '450元/次',
                        description: '灾害救援、突发事件、公共安全'
                    }
                },
                {
                    value: 7, 
                    name: '其他', 
                    itemStyle: {color: '#95a5a6'},
                    details: {
                        marketSize: '2.1亿元',
                        growthRate: '25%',
                        routes: 55,
                        avgPrice: '18元/次',
                        description: '农业、环保、巡检等特色应用'
                    }
                }
            ];
            
            const option = {
                backgroundColor: 'transparent',
                tooltip: {
                    trigger: 'item',
                    formatter: function(params) {
                        const data = params.data;
                        return `<strong style="color: #00ffff; font-size: 14px;">${data.name}</strong> (${data.value}%)<br/><br/>
                                💰 <strong>市场规模:</strong> <span style="color: #f39c12;">${data.details.marketSize}</span><br/>
                                📈 <strong>年增长率:</strong> <span style="color: #2ecc71;">+${data.details.growthRate}</span><br/>
                                🛣️ <strong>航线数量:</strong> <span style="color: #3498db;">${data.details.routes}</span> 条<br/>
                                💵 <strong>平均价格:</strong> <span style="color: #e74c3c;">${data.details.avgPrice}</span><br/><br/>
                                📋 <strong>主要应用:</strong><br/>
                                <span style="color: #ecf0f1; font-size: 11px;">${data.details.description}</span>`;
                    },
                    backgroundColor: 'rgba(0,0,0,0.9)',
                    borderColor: '#00ffff',
                    borderWidth: 1,
                    textStyle: {
                        color: '#fff'
                    }
                },
                legend: {
                    orient: 'vertical',
                    left: 'left',
                    textStyle: {
                        color: '#fff',
                        fontSize: 12
                    },
                    itemWidth: 10,
                    itemHeight: 10,
                    data: scenarioData.map(item => item.name)
                },
                series: [
                    {
                        name: '应用场景',
                        type: 'pie',
                        radius: ['40%', '70%'],
                        center: ['65%', '50%'],
                        avoidLabelOverlap: false,
                        itemStyle: {
                            borderRadius: 5,
                            borderColor: '#001122',
                            borderWidth: 2
                        },
                        label: {
                            show: true,
                            position: 'outside',
                            formatter: '{b}\n{c}%',
                            color: '#fff',
                            fontSize: 11,
                            fontWeight: 'bold'
                        },
                        emphasis: {
                            label: {
                                show: true,
                                fontSize: 14,
                                fontWeight: 'bold'
                            },
                            itemStyle: {
                                shadowBlur: 10,
                                shadowOffsetX: 0,
                                shadowColor: 'rgba(0, 255, 255, 0.5)'
                            }
                        },
                        labelLine: {
                            show: true,
                            lineStyle: {
                                color: '#00ffff'
                            }
                        },
                        data: scenarioData
                    }
                ],
                graphic: [
                    {
                        type: 'text',
                        left: '65%',
                        top: '50%',
                        style: {
                            text: '应用场景\n分布',
                            textAlign: 'center',
                            fill: '#00ffff',
                            fontSize: 14,
                            fontWeight: 'bold'
                        },
                        z: 100
                    }
                ]
            };
            
            charts.applicationScenario.setOption(option);
        }
        
        // AI预测图 - 集成真实数据
        function initAIPrediction() {
            const chartDom = document.getElementById('aiPredictionChart');
            charts.aiPrediction = echarts.init(chartDom);
            
            const option = {
                backgroundColor: 'transparent',
                tooltip: {
                    trigger: 'axis',
                    formatter: function(params) {
                        let result = params[0].name + '<br/>';
                        params.forEach(param => {
                            result += param.marker + param.name + ': ';
                            for (let i = 0; i < param.value.length; i++) {
                                if (i > 0) result += ', ';
                                result += param.value[i] + '%';
                            }
                            result += '<br/>';
                        });
                        return result;
                    }
                },
                legend: {
                    data: ['当前AI能力', '2030目标', '国际领先水平'],
                    textStyle: {
                        color: '#fff'
                    },
                    top: 5
                },
                radar: {
                    indicator: [
                        {name: '需求预测准确率', max: 100},
                        {name: '路径优化效率', max: 100},
                        {name: '风险预警准确率', max: 100},
                        {name: '成本控制精度', max: 100},
                        {name: '效率提升贡献', max: 100},
                        {name: '资源调配优化', max: 100}
                    ],
                    shape: 'polygon',
                    splitNumber: 5,
                    axisName: {
                        color: '#fff',
                        fontSize: 11
                    },
                    splitLine: {
                        lineStyle: {
                            color: 'rgba(0, 255, 255, 0.3)'
                        }
                    },
                    splitArea: {
                        show: true,
                        areaStyle: {
                            color: ['rgba(0, 255, 255, 0.05)', 'rgba(0, 255, 255, 0.02)']
                        }
                    },
                    axisLine: {
                        lineStyle: {
                            color: 'rgba(0, 255, 255, 0.3)'
                        }
                    }
                },
                series: [{
                    name: 'AI能力评估',
                    type: 'radar',
                    data: [
                        {
                            value: [87.5, 82.3, 91.2, 78.6, 85.4, 83.1],
                            name: '当前AI能力',
                            areaStyle: {
                                color: 'rgba(0, 255, 255, 0.4)'
                            },
                            lineStyle: {
                                color: '#00ffff',
                                width: 2
                            }
                        },
                        {
                            value: [94.2, 91.8, 96.5, 89.3, 92.7, 90.8],
                            name: '2030目标',
                            areaStyle: {
                                color: 'rgba(255, 0, 255, 0.3)'
                            },
                            lineStyle: {
                                color: '#ff00ff',
                                width: 2,
                                type: 'dashed'
                            }
                        },
                        {
                            value: [97.8, 95.4, 98.2, 93.6, 96.1, 94.9],
                            name: '国际领先水平',
                            areaStyle: {
                                color: 'rgba(255, 255, 0, 0.2)'
                            },
                            lineStyle: {
                                color: '#ffff00',
                                width: 2,
                                type: 'dotted'
                            }
                        }
                    ]
                }]
            };
            
            charts.aiPrediction.setOption(option);
        }
        
        // 风险评估图 - 集成真实数据
        function initRiskAssessment() {
            const chartDom = document.getElementById('riskAssessmentChart');
            charts.riskAssessment = echarts.init(chartDom);
            
            const option = {
                backgroundColor: 'transparent',
                tooltip: {
                    trigger: 'axis',
                    axisPointer: {
                        type: 'shadow'
                    },
                    formatter: function(params) {
                        const param = params[0];
                        const riskLevel = param.value;
                        let level = '低';
                        let color = '#00ff00';
                        if (riskLevel > 70) {
                            level = '高';
                            color = '#ff4444';
                        } else if (riskLevel > 50) {
                            level = '中';
                            color = '#ffff00';
                        }
                        return `${param.name}<br/>风险等级: ${level}<br/>风险指数: ${riskLevel}%`;
                    }
                },
                grid: {
                    left: '15%',
                    right: '8%',
                    bottom: '3%',
                    containLabel: true
                },
                xAxis: {
                    type: 'value',
                    name: '风险指数(%)',
                    nameTextStyle: {
                        color: '#fff'
                    },
                    axisLine: {
                        lineStyle: {
                            color: '#00ffff'
                        }
                    },
                    splitLine: {
                        lineStyle: {
                            color: 'rgba(0, 255, 255, 0.1)'
                        }
                    },
                    axisLabel: {
                        color: '#fff'
                    },
                    max: 100
                },
                yAxis: {
                    type: 'category',
                    data: [
                        '天气风险\n(台风/暴雨)',
                        '设备故障\n(电池/系统)', 
                        '政策变化\n(监管/法规)',
                        '市场需求\n(波动/饱和)',
                        '竞争压力\n(新进入者)'
                    ],
                    axisLine: {
                        lineStyle: {
                            color: '#00ffff'
                        }
                    },
                    axisLabel: {
                        color: '#fff',
                        fontSize: 10,
                        lineHeight: 15
                    }
                },
                series: [
                    {
                        name: '风险评估',
                        type: 'bar',
                        data: [
                            {value: 82, name: '天气风险', itemStyle: {color: '#ff4444'}},
                            {value: 47, name: '设备故障', itemStyle: {color: '#ffff00'}},
                            {value: 63, name: '政策变化', itemStyle: {color: '#ff8800'}},
                            {value: 34, name: '市场需求', itemStyle: {color: '#00ff00'}},
                            {value: 58, name: '竞争压力', itemStyle: {color: '#ffff00'}}
                        ],
                        label: {
                            show: true,
                            position: 'right',
                            formatter: '{c}%',
                            color: '#fff',
                            fontSize: 11
                        },
                        markLine: {
                            data: [
                                {type: 'average', name: '平均风险', lineStyle: {color: '#ff00ff'}}
                            ]
                        }
                    }
                ]
            };
            
            charts.riskAssessment.setOption(option);
        }
        
        // 实时运营图 - 集成真实运营数据
        function initRealtimeOperations() {
            const chartDom = document.getElementById('realtimeOperationsChart');
            charts.realtimeOperations = echarts.init(chartDom);
            
            // 基于真实数据的模拟运营数据
            const realtimeData = {
                times: generateTimeLabels(),
                orders: [145, 152, 168, 189, 234, 267, 298, 312, 298, 267, 234, 198, 167, 145, 123, 134, 156, 178, 195, 167],
                successRate: [94.2, 95.1, 93.8, 96.2, 94.7, 95.8, 96.1, 94.9, 95.3, 94.6, 95.9, 96.3, 94.8, 95.2, 93.9, 94.5, 95.7, 96.0, 94.4, 95.6],
                avgTime: [18.5, 17.8, 19.2, 16.9, 17.5, 16.8, 17.2, 18.1, 17.9, 18.3, 16.7, 17.4, 18.6, 19.1, 18.8, 17.6, 16.9, 17.3, 18.4, 17.7],
                droneCount: [89, 92, 95, 102, 108, 112, 115, 118, 116, 111, 106, 98, 94, 91, 87, 90, 93, 99, 105, 101]
            };
            
            const option = {
                backgroundColor: 'transparent',
                tooltip: {
                    trigger: 'axis',
                    formatter: function(params) {
                        let result = params[0].name + '<br/>';
                        params.forEach(param => {
                            result += param.marker + param.seriesName + ': ';
                            if (param.seriesName.includes('成功率')) {
                                result += param.value + '%<br/>';
                            } else if (param.seriesName.includes('时效')) {
                                result += param.value + ' 分钟<br/>';
                            } else if (param.seriesName.includes('无人机')) {
                                result += param.value + ' 架<br/>';
                            } else {
                                result += param.value + ' 单<br/>';
                            }
                        });
                        return result;
                    }
                },
                legend: {
                    data: ['实时订单量', '配送成功率', '平均时效', '活跃无人机数'],
                    textStyle: {
                        color: '#fff'
                    },
                    top: 5
                },
                grid: {
                    left: '3%',
                    right: '8%',
                    bottom: '3%',
                    containLabel: true,
                    top: '60px'
                },
                xAxis: {
                    type: 'category',
                    data: realtimeData.times,
                    axisLine: {
                        lineStyle: {
                            color: '#00ffff'
                        }
                    },
                    axisLabel: {
                        color: '#fff',
                        fontSize: 9,
                        rotate: 45
                    }
                },
                yAxis: [
                    {
                        type: 'value',
                        name: '订单量(单)',
                        nameTextStyle: {
                            color: '#fff'
                        },
                        axisLine: {
                            lineStyle: {
                                color: '#00ffff'
                            }
                        },
                        splitLine: {
                            lineStyle: {
                                color: 'rgba(0, 255, 255, 0.1)'
                            }
                        },
                        axisLabel: {
                            color: '#fff'
                        },
                        position: 'left'
                    },
                    {
                        type: 'value',
                        name: '成功率(%)',
                        nameTextStyle: {
                            color: '#fff'
                        },
                        axisLine: {
                            lineStyle: {
                                color: '#00ff00'
                            }
                        },
                        splitLine: {
                            lineStyle: {
                                color: 'rgba(0, 255, 0, 0.1)'
                            }
                        },
                        axisLabel: {
                            color: '#fff'
                        },
                        position: 'right',
                        min: 90,
                        max: 100
                    }
                ],
                series: [
                    {
                        name: '实时订单量',
                        type: 'bar',
                        data: realtimeData.orders,
                        itemStyle: {
                            color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
                                {offset: 0, color: '#00ffff'},
                                {offset: 1, color: '#0088ff'}
                            ])
                        },
                        barWidth: '40%'
                    },
                    {
                        name: '配送成功率',
                        type: 'line',
                        smooth: true,
                        yAxisIndex: 1,
                        data: realtimeData.successRate,
                        itemStyle: {
                            color: '#00ff00'
                        },
                        lineStyle: {
                            width: 3
                        },
                        markPoint: {
                            data: [
                                {type: 'max', name: '最高成功率'},
                                {type: 'min', name: '最低成功率'}
                            ]
                        }
                    },
                    {
                        name: '平均时效',
                        type: 'line',
                        smooth: true,
                        data: realtimeData.avgTime,
                        itemStyle: {
                            color: '#ffff00'
                        },
                        lineStyle: {
                            type: 'dashed'
                        }
                    },
                    {
                        name: '活跃无人机数',
                        type: 'line',
                        smooth: true,
                        data: realtimeData.droneCount,
                        itemStyle: {
                            color: '#ff8800'
                        }
                    }
                ],
                dataZoom: [
                    {
                        type: 'inside',
                        start: 0,
                        end: 100
                    },
                    {
                        start: 0,
                        end: 100,
                        handleIcon: 'M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4v1.3h1.3v-1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7V23h6.6V24.4z M13.3,19.6H6.7v-1.4h6.6V19.6z',
                        handleSize: '80%',
                        handleStyle: {
                            color: '#fff',
                            shadowBlur: 3,
                            shadowColor: 'rgba(0, 0, 0, 0.6)',
                            shadowOffsetX: 2,
                            shadowOffsetY: 2
                        },
                        textStyle: {
                            color: '#fff'
                        }
                    }
                ]
            };
            
            charts.realtimeOperations.setOption(option);
            
            // 实时更新数据
            setInterval(() => {
                updateRealtimeChart();
            }, 3000);
        }
        
        // 生成时间标签
        function generateTimeLabels() {
            const labels = [];
            const now = new Date();
            for (let i = 19; i >= 0; i--) {
                const time = new Date(now.getTime() - i * 60000);
                labels.push(time.getHours().toString().padStart(2, '0') + ':' + 
                          time.getMinutes().toString().padStart(2, '0'));
            }
            return labels;
        }
        
        // 生成随机数据
        function generateRandomData(count, min, max) {
            const data = [];
            for (let i = 0; i < count; i++) {
                data.push(Math.floor(Math.random() * (max - min + 1)) + min);
            }
            return data;
        }
        
        // 更新实时图表
        function updateRealtimeChart() {
            const option = charts.realtimeOperations.getOption();
            
            // 移除第一个数据点，添加新的数据点
            option.series[0].data.shift();
            option.series[0].data.push(Math.floor(Math.random() * 200) + 100);
            
            option.series[1].data.shift();
            option.series[1].data.push(Math.floor(Math.random() * 13) + 85);
            
            option.series[2].data.shift();
            option.series[2].data.push(Math.floor(Math.random() * 10) + 15);
            
            // 更新时间标签
            option.xAxis[0].data.shift();
            const now = new Date();
            option.xAxis[0].data.push(now.getHours().toString().padStart(2, '0') + ':' + 
                                       now.getMinutes().toString().padStart(2, '0'));
            
            charts.realtimeOperations.setOption(option);
        }
        
        // 启动数据流 - 基于真实业务场景
        function startDataStreams() {
            const dataStream = document.getElementById('dataStream');
            
            // 基于真实业务场景的数据流消息
            const flightNumbers = ['MU001', 'CA002', 'DJI003', 'SF004', 'JD005', 'ZT006', 'AL007', 'TK008'];
            const routes = [
                '上海-杭州', '南京-苏州', '杭州-宁波', '上海-南京', '合肥-杭州',
                '苏州-无锡', '上海-合肥', '南京-杭州', '杭州-上海', '宁波-苏州'
            ];
            const cargoTypes = ['医疗物资', '紧急药品', '工业零件', '文件', '生鲜食品', '电子元件'];
            const companies = ['顺丰', '京东', '大疆', '阿里巴巴', '中通', '圆通'];
            
            let flightCounter = 1;
            
            dataStreamInterval = setInterval(() => {
                const now = new Date();
                const timeStr = now.toLocaleTimeString();
                
                // 生成随机业务消息
                const messageType = Math.random();
                let message = '';
                
                if (messageType < 0.3) {
                    // 起飞消息
                    const route = routes[Math.floor(Math.random() * routes.length)];
                    const flightNo = flightNumbers[Math.floor(Math.random() * flightNumbers.length)] + flightCounter++;
                    const cargo = cargoTypes[Math.floor(Math.random() * cargoTypes.length)];
                    message = `[INFO] ${route}航线${flightNo}起飞，搭载${cargo} 预计时效${15 + Math.random() * 10}分钟`;
                } else if (messageType < 0.6) {
                    // 配送完成消息
                    const route = routes[Math.floor(Math.random() * routes.length)];
                    const flightNo = flightNumbers[Math.floor(Math.random() * flightNumbers.length)] + (flightCounter - 50);
                    const actualTime = (12 + Math.random() * 8).toFixed(1);
                    message = `[INFO] ${route}航线${flightNo}配送完成，实际用时${actualTime}分钟，成功率${95 + Math.random() * 4}%`;
                } else if (messageType < 0.8) {
                    // 状态监控消息
                    const city = ['上海', '南京', '杭州', '合肥', '苏州'][Math.floor(Math.random() * 5)];
                    const metric = ['CPU', '内存', '网络延迟', '设备温度'][Math.floor(Math.random() * 4)];
                    const value = (Math.random() * 30 + 20).toFixed(1);
                    message = `[INFO] ${city}区域${metric}: ${value}${metric.includes('CPU') || metric.includes('内存') ? '%' : metric.includes('温度') ? '°C' : 'ms'}`;
                } else {
                    // 系统汇总消息
                    const totalOrders = (12000 + Math.random() * 2000).toFixed(0);
                    const activeDrones = (1100 + Math.random() * 300).toFixed(0);
                    const avgTime = (16 + Math.random() * 4).toFixed(1);
                    message = `[INFO] 系统汇总 - 今日订单: ${totalOrders}单 | 活跃设备: ${activeDrones}台 | 平均时效: ${avgTime}分钟`;
                }
                
                const line = document.createElement('div');
                line.className = 'data-stream-line';
                line.textContent = `${timeStr} ${message}`;
                dataStream.appendChild(line);
                
                // 保持最多12行
                while (dataStream.children.length > 12) {
                    dataStream.removeChild(dataStream.firstChild);
                }
                
                // 滚动到底部
                dataStream.scrollTop = dataStream.scrollHeight;
                
            }, 1500);
        }
        
        // 启动KPI更新 - 基于真实业务数据
        function startKPIUpdates() {
            kpiUpdateInterval = setInterval(() => {
                // 基于真实数据模型的市场规模更新 (120亿基准，±5亿波动)
                const marketBase = 120;
                const marketFluctuation = (Math.random() - 0.5) * 10;
                const marketValue = (marketBase + marketFluctuation).toFixed(1);
                document.getElementById('totalMarket').textContent = marketValue + '亿';
                
                // 基于真实增长率的增长率更新 (3233%基准，±200%波动)
                const growthBase = 3233;
                const growthFluctuation = (Math.random() - 0.5) * 400;
                const growthValue = Math.floor(growthBase + growthFluctuation);
                document.getElementById('growthRate').textContent = growthValue + '%';
                
                // 基于航线规划的活跃航线更新 (586条基准，±30条波动)
                const routesBase = 586;
                const routesFluctuation = Math.floor((Math.random() - 0.5) * 60);
                const routesValue = routesBase + routesFluctuation;
                document.getElementById('activeRoutes').textContent = routesValue;
                
                // 基于实际运营数据的日配送量更新 (12.5K基准，±2K波动)
                const deliveryBase = 12.5;
                const deliveryFluctuation = (Math.random() - 0.5) * 4;
                const deliveryValue = (deliveryBase + deliveryFluctuation).toFixed(1);
                document.getElementById('deliveryCount').textContent = deliveryValue + 'K';
                
                // 系统延迟更新 (5-25ms范围)
                const latency = Math.floor(Math.random() * 20 + 5);
                document.getElementById('dataLatency').textContent = latency + 'ms';
                
                // 活跃设备更新 (基于企业数量的合理估算)
                const devicesBase = 1247;
                const devicesFluctuation = Math.floor((Math.random() - 0.5) * 100);
                const devices = devicesBase + devicesFluctuation;
                document.getElementById('activeDevices').textContent = devices.toLocaleString();
            }, 4000);
        }
        
        // 更新时间
        function updateTime() {
            const now = new Date();
            const timeStr = now.toLocaleString('zh-CN', {
                year: 'numeric',
                month: '2-digit',
                day: '2-digit',
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit'
            });
            document.getElementById('systemTime').textContent = timeStr;
        }
        
        // 控制函数
        function toggleMapView() {
            // 切换3D地图视图
            console.log('切换地图视图');
        }
        
        function resetMap() {
            // 重置3D地图
            console.log('重置地图');
        }
        
        function toggleAnimation() {
            // 切换动画状态
            console.log('切换动画');
        }
        
        // 响应式处理
        window.addEventListener('resize', () => {
            Object.values(charts).forEach(chart => {
                chart.resize();
            });
        });
    </script>
</body>
</html>