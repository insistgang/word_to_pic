<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é•¿ä¸‰è§’ä½ç©ºç‰©æµæ™ºèƒ½æŒ‡æŒ¥ä¸­å¿ƒ</title>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/echarts-gl@2.0.9/dist/echarts-gl.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Orbitron', 'Microsoft YaHei', sans-serif;
            background: #000;
            color: #fff;
            overflow: hidden;
            position: relative;
        }
        
        /* åŠ¨æ€ç²’å­èƒŒæ™¯ */
        #particles-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background: radial-gradient(ellipse at center, #1e3c72 0%, #2a5298 50%, #000 100%);
        }
        
        /* æ‰«æçº¿æ•ˆæœ */
        .scanlines::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                transparent 50%,
                rgba(0, 255, 255, 0.03) 50%
            );
            background-size: 100% 4px;
            z-index: 1;
            pointer-events: none;
            animation: scanlines 8s linear infinite;
        }
        
        @keyframes scanlines {
            0% { background-position: 0 0; }
            100% { background-position: 0 10px; }
        }
        
        /* é¡¶éƒ¨çŠ¶æ€æ  */
        .status-bar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 60px;
            background: linear-gradient(180deg, rgba(0,20,40,0.9) 0%, rgba(0,40,80,0.3) 100%);
            border-bottom: 2px solid #00ffff;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 30px;
            z-index: 1000;
            backdrop-filter: blur(10px);
        }
        
        .system-title {
            font-size: 1.5em;
            font-weight: 900;
            color: #00ffff;
            text-shadow: 0 0 20px #00ffff;
            letter-spacing: 3px;
        }
        
        .status-info {
            display: flex;
            gap: 30px;
            align-items: center;
        }
        
        .status-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
        }
        
        .status-label {
            font-size: 0.8em;
            color: #00ffff;
            opacity: 0.8;
        }
        
        .status-value {
            font-size: 1.1em;
            font-weight: 700;
            color: #fff;
            text-shadow: 0 0 10px #00ffff;
        }
        
        /* ä¸»è¦å®¹å™¨ */
        .main-container {
            position: fixed;
            top: 60px;
            left: 0;
            right: 0;
            bottom: 0;
            display: grid;
            grid-template-columns: 300px 1fr 350px;
            grid-template-rows: 1fr 300px;
            gap: 2px;
            background: rgba(0, 255, 255, 0.1);
            padding: 2px;
        }
        
        /* é€šç”¨é¢æ¿æ ·å¼ */
        .panel {
            background: linear-gradient(135deg, rgba(0,20,40,0.8) 0%, rgba(0,40,80,0.4) 100%);
            border: 1px solid rgba(0, 255, 255, 0.3);
            border-radius: 10px;
            padding: 20px;
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }
        
        .panel::before {
            content: "";
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, #00ffff, #ff00ff, #ffff00, #00ffff);
            border-radius: 10px;
            opacity: 0;
            z-index: -1;
            transition: opacity 0.3s ease;
            animation: borderRotate 3s linear infinite;
        }
        
        .panel:hover::before {
            opacity: 0.7;
        }
        
        @keyframes borderRotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .panel-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(0, 255, 255, 0.3);
        }
        
        .panel-title {
            font-size: 1.1em;
            font-weight: 700;
            color: #00ffff;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .panel-status {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .status-indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #00ff00;
            box-shadow: 0 0 10px #00ff00;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.7; transform: scale(1.2); }
        }
        
        /* å·¦ä¾§é¢æ¿ */
        .left-panel {
            grid-row: 1 / 3;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        /* ä¸­å¤®ä¸»é¢æ¿ */
        .center-main {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        /* å³ä¾§é¢æ¿ */
        .right-panel {
            grid-row: 1 / 3;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        /* åº•éƒ¨é¢æ¿ */
        .bottom-panel {
            grid-column: 2;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        /* KPIç½‘æ ¼ */
        .kpi-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .kpi-item {
            background: linear-gradient(135deg, rgba(0, 255, 255, 0.1) 0%, rgba(0, 255, 255, 0.05) 100%);
            border: 1px solid rgba(0, 255, 255, 0.3);
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .kpi-item::after {
            content: "";
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(0, 255, 255, 0.4), transparent);
            transition: left 0.5s ease;
        }
        
        .kpi-item:hover::after {
            left: 100%;
        }
        
        .kpi-value {
            font-size: 1.8em;
            font-weight: 900;
            color: #00ffff;
            text-shadow: 0 0 15px #00ffff;
            margin-bottom: 5px;
            font-family: 'Orbitron', monospace;
        }
        
        .kpi-label {
            font-size: 0.8em;
            color: #fff;
            opacity: 0.8;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        /* å›¾è¡¨å®¹å™¨ */
        .chart-container {
            flex: 1;
            position: relative;
            min-height: 200px;
        }
        
        /* 3Då›¾è¡¨å®¹å™¨ */
        .chart-3d {
            height: 100%;
            width: 100%;
        }
        
        /* æ•°æ®è¡¨æ ¼ */
        .data-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.9em;
        }
        
        .data-table th,
        .data-table td {
            padding: 8px 12px;
            text-align: left;
            border-bottom: 1px solid rgba(0, 255, 255, 0.2);
        }
        
        .data-table th {
            background: rgba(0, 255, 255, 0.1);
            color: #00ffff;
            font-weight: 700;
            text-transform: uppercase;
            font-size: 0.8em;
        }
        
        .data-table tr:hover {
            background: rgba(0, 255, 255, 0.05);
        }
        
        /* è­¦å‘Šæç¤º */
        .alert-panel {
            background: linear-gradient(135deg, rgba(255, 0, 0, 0.2) 0%, rgba(255, 0, 0, 0.1) 100%);
            border: 1px solid rgba(255, 0, 0, 0.5);
            border-radius: 8px;
            padding: 15px;
            margin-top: 10px;
        }
        
        .alert-title {
            color: #ff4444;
            font-weight: 700;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .alert-list {
            list-style: none;
            font-size: 0.9em;
        }
        
        .alert-item {
            padding: 5px 0;
            border-left: 3px solid #ff4444;
            padding-left: 10px;
            margin-bottom: 5px;
        }
        
        /* æ•°æ®å…³è”åˆ†æé¢æ¿ */
        .correlation-panel {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid #00ffff;
            border-radius: 8px;
            padding: 12px;
            backdrop-filter: blur(5px);
        }
        
        .correlation-item {
            background: rgba(0, 50, 100, 0.3);
            border: 1px solid rgba(0, 255, 255, 0.3);
            border-radius: 6px;
            padding: 10px;
            margin-bottom: 8px;
            transition: all 0.3s ease;
        }
        
        .correlation-item:hover {
            background: rgba(0, 100, 200, 0.4);
            border-color: #00ffff;
            transform: translateX(5px);
        }
        
        .correlation-title {
            font-size: 12px;
            color: #00ffff;
            margin-bottom: 5px;
            font-weight: bold;
        }
        
        .correlation-value {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 3px;
            text-shadow: 0 0 10px currentColor;
        }
        
        .correlation-desc {
            font-size: 10px;
            color: #bdc3c7;
            opacity: 0.8;
        }
        
        /* å®æ—¶æ•°æ®æµ */
        .data-stream {
            font-family: 'Orbitron', monospace;
            font-size: 0.8em;
            color: #00ff00;
            height: 100px;
            overflow-y: auto;
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid #00ff00;
            border-radius: 5px;
            padding: 10px;
        }
        
        .data-stream-line {
            margin-bottom: 3px;
            opacity: 0;
            animation: dataFlow 0.5s ease forwards;
        }
        
        @keyframes dataFlow {
            from { opacity: 0; transform: translateX(-20px); }
            to { opacity: 1; transform: translateX(0); }
        }
        
        /* åœ°å›¾å®¹å™¨ */
        .map-container {
            height: 300px;
            border: 1px solid rgba(0, 255, 255, 0.3);
            border-radius: 8px;
            overflow: hidden;
            position: relative;
        }
        
        /* æ§åˆ¶æŒ‰é’® */
        .control-buttons {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        
        .control-btn {
            background: linear-gradient(135deg, rgba(0, 255, 255, 0.2) 0%, rgba(0, 255, 255, 0.1) 100%);
            border: 1px solid rgba(0, 255, 255, 0.5);
            color: #00ffff;
            padding: 8px 16px;
            border-radius: 5px;
            cursor: pointer;
            font-family: 'Orbitron', monospace;
            font-weight: 700;
            transition: all 0.3s ease;
            text-transform: uppercase;
            font-size: 0.8em;
        }
        
        .control-btn:hover {
            background: linear-gradient(135deg, rgba(0, 255, 255, 0.4) 0%, rgba(0, 255, 255, 0.2) 100%);
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.5);
            transform: translateY(-2px);
        }
        
        /* åŠ è½½åŠ¨ç”» */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10000;
        }
        
        .loading-content {
            text-align: center;
        }
        
        .loading-spinner {
            width: 60px;
            height: 60px;
            border: 3px solid rgba(0, 255, 255, 0.3);
            border-top: 3px solid #00ffff;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 1400px) {
            .main-container {
                grid-template-columns: 250px 1fr 300px;
            }
        }
        
        @media (max-width: 1200px) {
            .main-container {
                grid-template-columns: 1fr;
                grid-template-rows: auto auto auto auto;
            }
            
            .left-panel,
            .right-panel {
                grid-row: auto;
            }
            
            .bottom-panel {
                grid-column: 1;
            }
        }
    </style>
</head>
<body class="scanlines">
    <!-- ç²’å­èƒŒæ™¯ -->
    <canvas id="particles-canvas"></canvas>
    
    <!-- åŠ è½½ç”»é¢ -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <div style="color: #00ffff; font-family: 'Orbitron', monospace; font-size: 1.2em;">
                ç³»ç»Ÿåˆå§‹åŒ–ä¸­...
            </div>
        </div>
    </div>
    
    <!-- çŠ¶æ€æ  -->
    <div class="status-bar">
        <div class="system-title">é•¿ä¸‰è§’ä½ç©ºç‰©æµæ™ºèƒ½æŒ‡æŒ¥ä¸­å¿ƒ</div>
        <div class="status-info">
            <div class="status-item">
                <div class="status-label">ç³»ç»Ÿæ—¶é—´</div>
                <div class="status-value" id="systemTime">--:--:--</div>
            </div>
            <div class="status-item">
                <div class="status-label">è¿æ¥çŠ¶æ€</div>
                <div class="status-value">
                    <span style="color: #00ff00;">â— åœ¨çº¿</span>
                </div>
            </div>
            <div class="status-item">
                <div class="status-label">æ•°æ®å»¶è¿Ÿ</div>
                <div class="status-value" id="dataLatency">12ms</div>
            </div>
            <div class="status-item">
                <div class="status-label">æ´»è·ƒè®¾å¤‡</div>
                <div class="status-value" id="activeDevices">1,247</div>
            </div>
        </div>
    </div>
    
    <!-- ä¸»è¦å®¹å™¨ -->
    <div class="main-container">
        <!-- å·¦ä¾§é¢æ¿ -->
        <div class="left-panel panel">
            <div class="panel-header">
                <div class="panel-title">å®æ—¶ç›‘æ§</div>
                <div class="panel-status">
                    <div class="status-indicator"></div>
                    <span style="font-size: 0.8em; color: #00ff00;">æ­£å¸¸</span>
                </div>
            </div>
            
            <!-- KPIæŒ‡æ ‡ -->
            <div class="kpi-grid">
                <div class="kpi-item">
                    <div class="kpi-value" id="totalMarket">120äº¿</div>
                    <div class="kpi-label">å¸‚åœºè§„æ¨¡</div>
                </div>
                <div class="kpi-item">
                    <div class="kpi-value" id="growthRate">3233%</div>
                    <div class="kpi-label">å¢é•¿ç‡</div>
                </div>
                <div class="kpi-item">
                    <div class="kpi-value" id="activeRoutes">586</div>
                    <div class="kpi-label">æ´»è·ƒèˆªçº¿</div>
                </div>
                <div class="kpi-item">
                    <div class="kpi-value" id="deliveryCount">12.5K</div>
                    <div class="kpi-label">æ—¥é…é€é‡</div>
                </div>
            </div>
            
            <!-- å®æ—¶æ•°æ®æµ -->
            <div class="panel-header">
                <div class="panel-title">æ•°æ®æµ</div>
                <div class="panel-status">
                    <div class="status-indicator"></div>
                </div>
            </div>
            <div class="data-stream" id="dataStream"></div>
            
            <!-- ç³»ç»ŸçŠ¶æ€ -->
            <div class="panel-header">
                <div class="panel-title">ç³»ç»ŸçŠ¶æ€</div>
            </div>
            <table class="data-table">
                <thead>
                    <tr>
                        <th>ç³»ç»Ÿæ¨¡å—</th>
                        <th>è¿è¡ŒçŠ¶æ€</th>
                        <th>CPUä½¿ç”¨ç‡</th>
                        <th>å†…å­˜å ç”¨</th>
                        <th>ç½‘ç»œå»¶è¿Ÿ</th>
                    </tr>
                </thead>
                <tbody id="systemStatus">
                    <tr>
                        <td>ğŸš é£è¡Œæ§åˆ¶ç³»ç»Ÿ</td>
                        <td style="color: #00ff00;">â— æ­£å¸¸</td>
                        <td>23.4%</td>
                        <td>45.2%</td>
                        <td>12ms</td>
                    </tr>
                    <tr>
                        <td>ğŸ—ºï¸ è·¯ç”±è§„åˆ’å¼•æ“</td>
                        <td style="color: #00ff00;">â— æ­£å¸¸</td>
                        <td>12.8%</td>
                        <td>34.7%</td>
                        <td>8ms</td>
                    </tr>
                    <tr>
                        <td>ğŸ“Š æ•°æ®å¤„ç†ä¸­å¿ƒ</td>
                        <td style="color: #ffff00;">â— è´Ÿè½½é«˜</td>
                        <td>67.3%</td>
                        <td>78.9%</td>
                        <td>15ms</td>
                    </tr>
                    <tr>
                        <td>ğŸ›¡ï¸ å®‰å…¨ç›‘æ§æ¨¡å—</td>
                        <td style="color: #00ff00;">â— æ­£å¸¸</td>
                        <td>8.5%</td>
                        <td>23.1%</td>
                        <td>6ms</td>
                    </tr>
                    <tr>
                        <td>ğŸ“¡ é€šä¿¡ç®¡ç†ç³»ç»Ÿ</td>
                        <td style="color: #00ff00;">â— æ­£å¸¸</td>
                        <td>15.6%</td>
                        <td>41.8%</td>
                        <td>9ms</td>
                    </tr>
                    <tr>
                        <td>âš ï¸ é¢„è­¦åˆ†æç³»ç»Ÿ</td>
                        <td style="color: #ff4444;">â— å¼‚å¸¸</td>
                        <td>89.2%</td>
                        <td>92.4%</td>
                        <td>28ms</td>
                    </tr>
                </tbody>
            </table>
        </div>
        
        <!-- ä¸­å¤®ä¸»é¢æ¿ -->
        <div class="center-main">
            <!-- 3Dåœ°å›¾ -->
            <div class="panel">
                <div class="panel-header">
                    <div class="panel-title">é•¿ä¸‰è§’åŒºåŸŸ3Dç›‘æ§</div>
                    <div class="panel-status">
                        <div class="status-indicator"></div>
                    </div>
                </div>
                <div class="chart-3d" id="map3D"></div>
                <div class="control-buttons">
                    <button class="control-btn" onclick="toggleMapView()">åˆ‡æ¢è§†å›¾</button>
                    <button class="control-btn" onclick="resetMap()">é‡ç½®</button>
                    <button class="control-btn" onclick="toggleAnimation()">åŠ¨ç”»</button>
                </div>
            </div>
            
            <!-- å¸‚åœºè¶‹åŠ¿ -->
            <div class="panel">
                <div class="panel-header">
                    <div class="panel-title">å¸‚åœºè¶‹åŠ¿åˆ†æ</div>
                    <div class="panel-status">
                        <div class="status-indicator"></div>
                    </div>
                </div>
                <div class="chart-container" id="marketTrendChart"></div>
            </div>
        </div>
        
        <!-- å³ä¾§é¢æ¿ -->
        <div class="right-panel panel">
            <div class="panel-header">
                <div class="panel-title">æ™ºèƒ½åˆ†æ</div>
                <div class="panel-status">
                    <div class="status-indicator"></div>
                </div>
            </div>
            
            <!-- åº”ç”¨åœºæ™¯åˆ†å¸ƒ -->
            <div class="panel-header" style="margin-top: 15px;">
                <div class="panel-title">åº”ç”¨åœºæ™¯åˆ†å¸ƒ</div>
            </div>
            <div class="chart-container" id="applicationScenarioChart"></div>
            
            <!-- AIé¢„æµ‹ -->
            <div class="chart-container" id="aiPredictionChart"></div>
            
            <!-- é£é™©è¯„ä¼° -->
            <div class="panel-header" style="margin-top: 15px;">
                <div class="panel-title">é£é™©è¯„ä¼°</div>
            </div>
            <div class="chart-container" id="riskAssessmentChart"></div>
            
            <!-- è­¦å‘Šé¢æ¿ - åŸºäºçœŸå®ç›‘æ§æ•°æ® -->
            <div class="alert-panel">
                <div class="alert-title">
                    <span>âš ï¸</span>
                    å®æ—¶ç›‘æ§è­¦å‘Š ( <span id="alertCount">3</span> é¡¹ )
                </div>
                <ul class="alert-list" id="alertList">
                    <li class="alert-item">ã€é«˜ä¼˜å…ˆçº§ã€‘ä¸Šæµ·åŒºåŸŸå°é£è“è‰²é¢„è­¦ï¼Œå½±å“12æ¡èˆªçº¿ï¼Œå»ºè®®æš‚åœæˆ·å¤–é…é€ä½œä¸š</li>
                    <li class="alert-item">ã€ä¸­ä¼˜å…ˆçº§ã€‘å—äº¬æ±Ÿå®åŒº3æ¶æ— äººæœºç”µæ± æ¸©åº¦å¼‚å¸¸(68Â°C)ï¼Œå»ºè®®ç«‹å³è¿”èˆªæ£€ä¿®</li>
                    <li class="alert-item">ã€ä½ä¼˜å…ˆçº§ã€‘æ­å·-å®æ³¢èˆªçº¿æ•°æ®é“¾è·¯å»¶è¿Ÿåé«˜(45ms)ï¼Œæ­£åœ¨åˆ‡æ¢å¤‡ç”¨ä¿¡é“</li>
                    <li class="alert-item">ã€ä¿¡æ¯ã€‘è‹å·å·¥ä¸šåŒºè®¢å•é‡çªå¢200%ï¼Œå»ºè®®è°ƒé…5æ¶æ— äººæœºæ”¯æ´</li>
                </ul>
            </div>
            
            <!-- æ•°æ®å…³è”åˆ†æé¢æ¿ -->
            <div class="panel-header" style="margin-top: 15px;">
                <div class="panel-title">æ•°æ®å…³è”åˆ†æ</div>
            </div>
            <div class="correlation-panel">
                <div class="correlation-item">
                    <div class="correlation-title">ğŸ”— æŠ•èµ„ä¸èˆªçº¿å…³è”åº¦</div>
                    <div class="correlation-value" style="color: #2ecc71;">0.89</div>
                    <div class="correlation-desc">é«˜ç›¸å…³ï¼šæŠ•èµ„æ¯å¢åŠ 1äº¿ï¼Œèˆªçº¿å¢é•¿15æ¡</div>
                </div>
                <div class="correlation-item">
                    <div class="correlation-title">ğŸ”— ä¼ä¸šä¸å¸‚åœºå…³è”åº¦</div>
                    <div class="correlation-value" style="color: #f39c12;">0.76</div>
                    <div class="correlation-desc">è¾ƒé«˜ç›¸å…³ï¼šä¼ä¸šæ•°é‡ä¸å¸‚åœºè§„æ¨¡å¼ºç›¸å…³</div>
                </div>
                <div class="correlation-item">
                    <div class="correlation-title">ğŸ”— åŒ»ç–—éœ€æ±‚ä¸GDPå…³è”åº¦</div>
                    <div class="correlation-value" style="color: #e74c3c;">0.92</div>
                    <div class="correlation-desc">æé«˜ç›¸å…³ï¼šé«˜GDPåœ°åŒºåŒ»ç–—éœ€æ±‚æ›´æ—ºç››</div>
                </div>
            </div>
        </div>
        
        <!-- åº•éƒ¨é¢æ¿ -->
        <div class="bottom-panel panel">
            <div class="panel-header">
                <div class="panel-title">å®æ—¶è¿è¥æ•°æ®</div>
                <div class="panel-status">
                    <div class="status-indicator"></div>
                </div>
            </div>
            <div class="chart-container" id="realtimeOperationsChart"></div>
        </div>
    </div>

    <script>
        // å…¨å±€å˜é‡
        let charts = {};
        let particlesAnimation;
        let dataStreamInterval;
        let kpiUpdateInterval;
        
        // ç³»ç»Ÿåˆå§‹åŒ–
        window.addEventListener('load', function() {
            setTimeout(() => {
                document.getElementById('loadingOverlay').style.display = 'none';
                initSystem();
            }, 2000);
        });
        
        // åˆå§‹åŒ–ç³»ç»Ÿ
        function initSystem() {
            initParticles();
            initCharts();
            startDataStreams();
            startKPIUpdates();
            updateTime();
            setInterval(updateTime, 1000);
        }
        
        // ç²’å­èƒŒæ™¯ç³»ç»Ÿ
        function initParticles() {
            const canvas = document.getElementById('particles-canvas');
            const ctx = canvas.getContext('2d');
            
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            
            const particles = [];
            const particleCount = 100;
            
            class Particle {
                constructor() {
                    this.x = Math.random() * canvas.width;
                    this.y = Math.random() * canvas.height;
                    this.vx = (Math.random() - 0.5) * 0.5;
                    this.vy = (Math.random() - 0.5) * 0.5;
                    this.size = Math.random() * 2 + 1;
                    this.opacity = Math.random() * 0.5 + 0.2;
                }
                
                update() {
                    this.x += this.vx;
                    this.y += this.vy;
                    
                    if (this.x < 0 || this.x > canvas.width) this.vx *= -1;
                    if (this.y < 0 || this.y > canvas.height) this.vy *= -1;
                }
                
                draw() {
                    ctx.save();
                    ctx.globalAlpha = this.opacity;
                    ctx.fillStyle = '#00ffff';
                    ctx.beginPath();
                    ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                    ctx.fill();
                    ctx.restore();
                }
            }
            
            // åˆ›å»ºç²’å­
            for (let i = 0; i < particleCount; i++) {
                particles.push(new Particle());
            }
            
            // è¿çº¿æ•ˆæœ
            function drawConnections() {
                for (let i = 0; i < particles.length; i++) {
                    for (let j = i + 1; j < particles.length; j++) {
                        const dx = particles[i].x - particles[j].x;
                        const dy = particles[i].y - particles[j].y;
                        const distance = Math.sqrt(dx * dx + dy * dy);
                        
                        if (distance < 100) {
                            ctx.save();
                            ctx.globalAlpha = (100 - distance) / 100 * 0.2;
                            ctx.strokeStyle = '#00ffff';
                            ctx.lineWidth = 1;
                            ctx.beginPath();
                            ctx.moveTo(particles[i].x, particles[i].y);
                            ctx.lineTo(particles[j].x, particles[j].y);
                            ctx.stroke();
                            ctx.restore();
                        }
                    }
                }
            }
            
            // åŠ¨ç”»å¾ªç¯
            function animate() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                particles.forEach(particle => {
                    particle.update();
                    particle.draw();
                });
                
                drawConnections();
                requestAnimationFrame(animate);
            }
            
            animate();
            
            // å“åº”çª—å£å¤§å°å˜åŒ–
            window.addEventListener('resize', () => {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
            });
        }
        
        // åˆå§‹åŒ–æ‰€æœ‰å›¾è¡¨
        function initCharts() {
            init3DMap();
            initMarketTrend();
            initApplicationScenario();
            initAIPrediction();
            initRiskAssessment();
            initRealtimeOperations();
        }
        
        // 3Dåœ°å›¾ - é›†æˆé•¿ä¸‰è§’çœŸå®æ•°æ®
        function init3DMap() {
            const chartDom = document.getElementById('map3D');
            charts.map3D = echarts.init(chartDom);
            
            // é•¿ä¸‰è§’åŸå¸‚æ•°æ® - å¢å¼ºç‰ˆï¼ŒåŒ…å«æ›´è¯¦ç»†çš„ä¸šåŠ¡æŒ‡æ ‡
            const cityData = [
                {name: 'ä¸Šæµ·', value: [121.4737, 31.2304, 95], routeCount: 270, investment: 7.5, companies: 120, growthRate: 45.8, marketShare: 35.2, medicalRoutes: 95, industrialRoutes: 110},
                {name: 'å—äº¬', value: [118.7969, 32.0603, 78], routeCount: 150, investment: 37.5, companies: 80, growthRate: 52.3, marketShare: 22.1, medicalRoutes: 45, industrialRoutes: 68},
                {name: 'æ­å·', value: [120.1551, 30.2741, 82], routeCount: 120, investment: 20, companies: 60, growthRate: 48.7, marketShare: 18.5, medicalRoutes: 38, industrialRoutes: 42},
                {name: 'åˆè‚¥', value: [117.2272, 31.8206, 65], routeCount: 60, investment: 15, companies: 30, growthRate: 55.2, marketShare: 8.9, medicalRoutes: 18, industrialRoutes: 25},
                {name: 'è‹å·', value: [120.6196, 31.2990, 71], routeCount: 85, investment: 18.5, companies: 45, growthRate: 41.9, marketShare: 12.6, medicalRoutes: 22, industrialRoutes: 48},
                {name: 'æ— é”¡', value: [120.3055, 31.5704, 68], routeCount: 72, investment: 12.3, companies: 38, growthRate: 39.8, marketShare: 10.7, medicalRoutes: 20, industrialRoutes: 35},
                {name: 'å®æ³¢', value: [121.5440, 29.8683, 63], routeCount: 58, investment: 9.8, companies: 32, growthRate: 44.1, marketShare: 8.6, medicalRoutes: 15, industrialRoutes: 28},
                {name: 'å¸¸å·', value: [119.9739, 31.7732, 58], routeCount: 45, investment: 8.2, companies: 25, growthRate: 37.5, marketShare: 6.7, medicalRoutes: 12, industrialRoutes: 22}
            ];
            
            const option = {
                backgroundColor: 'transparent',
                tooltip: {
                    trigger: 'item',
                    formatter: function(params) {
                        if (params.data) {
                            const city = params.data;
                            return `<strong style="color: #00ffff; font-size: 16px;">${city.name}</strong><br/><br/>
                                    ğŸš <strong>èˆªçº¿ä¿¡æ¯</strong><br/>
                                    &nbsp;&nbsp;æ€»èˆªçº¿æ•°é‡: <span style="color: #00ff00;">${city.routeCount}</span> æ¡<br/>
                                    &nbsp;&nbsp;åŒ»ç–—èˆªçº¿: <span style="color: #e74c3c;">${city.medicalRoutes}</span> æ¡<br/>
                                    &nbsp;&nbsp;å·¥ä¸šèˆªçº¿: <span style="color: #3498db;">${city.industrialRoutes}</span> æ¡<br/><br/>
                                    ğŸ’° <strong>ç»æµæŒ‡æ ‡</strong><br/>
                                    &nbsp;&nbsp;æŠ•èµ„è§„æ¨¡: <span style="color: #f39c12;">${city.investment}</span> äº¿å…ƒ<br/>
                                    &nbsp;&nbsp;å¸‚åœºå æœ‰ç‡: <span style="color: #9b59b6;">${city.marketShare}</span>%<br/>
                                    &nbsp;&nbsp;å¹´å¢é•¿ç‡: <span style="color: #2ecc71;">+${city.growthRate}</span>%<br/><br/>
                                    ğŸ¢ <strong>ä¼ä¸šç”Ÿæ€</strong><br/>
                                    &nbsp;&nbsp;ä¼ä¸šæ•°é‡: <span style="color: #00ffff;">${city.companies}</span> å®¶`;
                        }
                        return params.name + ': ' + params.value[2];
                    }
                },
                visualMap: {
                    min: 0,
                    max: 100,
                    calculable: true,
                    inRange: {
                        color: ['#004d99', '#00ffff', '#ff00ff', '#ffff00']
                    },
                    textStyle: {
                        color: '#fff'
                    },
                    left: 'left',
                    top: 'bottom'
                },
                geo3D: {
                    map: 'china',
                    environment: '#001122',
                    shading: 'realistic',
                    realisticMaterial: {
                        roughness: 0.2,
                        metalness: 0
                    },
                    postEffect: {
                        enable: true,
                        bloom: {
                            enable: true,
                            bloomIntensity: 0.1
                        }
                    },
                    light: {
                        main: {
                            intensity: 1.2,
                            shadow: true,
                            alpha: 20
                        },
                        ambient: {
                            intensity: 0.3
                        }
                    },
                    viewControl: {
                        distance: 80,
                        alpha: 40,
                        center: [120, 32, 0],
                        animation: true,
                        animationDurationUpdate: 1000
                    },
                    itemStyle: {
                        color: '#00ffff',
                        opacity: 0.8,
                        borderWidth: 1,
                        borderColor: '#00ffff'
                    },
                    emphasis: {
                        itemStyle: {
                            color: '#ff00ff',
                            opacity: 1
                        }
                    },
                    label: {
                        show: true,
                        textStyle: {
                            color: '#fff',
                            fontSize: 8,
                            backgroundColor: 'rgba(0,0,0,0.5)'
                        }
                    }
                },
                series: [
                    {
                        type: 'scatter3D',
                        coordinateSystem: 'geo3D',
                        data: cityData,
                        symbolSize: function(val) {
                            return val[2] / 5;
                        },
                        itemStyle: {
                            color: function(params) {
                                const value = params.value[2];
                                if (value > 80) return '#ff00ff';
                                if (value > 70) return '#ffff00';
                                return '#00ffff';
                            },
                            opacity: 0.9
                        },
                        emphasis: {
                            itemStyle: {
                                color: '#fff'
                            }
                        }
                    }
                ]
            };
            
            charts.map3D.setOption(option);
            
            // 3Dè‡ªåŠ¨æ—‹è½¬
            let angle = 0;
            setInterval(() => {
                angle += 0.5;
                charts.map3D.setOption({
                    geo3D: {
                        viewControl: {
                            alpha: 40 + Math.sin(angle * 0.02) * 10,
                            beta: angle * 0.5
                        }
                    }
                });
            }, 50);
        }
        
        // ç”Ÿæˆ3Dæ•°æ®
        function generate3DData() {
            const data = [];
            for (let i = 0; i < 50; i++) {
                for (let j = 0; j < 50; j++) {
                    const x = (i - 25) * 2;
                    const y = (j - 25) * 2;
                    const z = Math.sin(x * 0.1) * Math.cos(y * 0.1) * 20 + 
                             Math.random() * 30 + 50;
                    data.push([x, y, z]);
                }
            }
            return data;
        }
        
        // å¸‚åœºè¶‹åŠ¿å›¾ - é›†æˆçœŸå®æ•°æ®
        function initMarketTrend() {
            const chartDom = document.getElementById('marketTrendChart');
            charts.marketTrend = echarts.init(chartDom);
            
            const option = {
                backgroundColor: 'transparent',
                tooltip: {
                    trigger: 'axis',
                    axisPointer: {
                        type: 'cross'
                    },
                    formatter: function(params) {
                        let result = params[0].name + '<br/>';
                        params.forEach(param => {
                            result += param.marker + param.seriesName + ': ';
                            if (param.seriesName.includes('è§„æ¨¡') || param.seriesName.includes('åŒ»ç–—')) {
                                result += param.value + ' äº¿å…ƒ<br/>';
                            } else if (param.seriesName.includes('å¢é•¿ç‡')) {
                                result += param.value + '%<br/>';
                            } else {
                                result += param.value + '<br/>';
                            }
                        });
                        return result;
                    }
                },
                legend: {
                    data: ['æ€»å¸‚åœºè§„æ¨¡', 'åŒæ¯”å¢é•¿ç‡', 'åŒ»ç–—ç‰©æµå¸‚åœº', 'å·¥ä¸šç‰©æµå¸‚åœº', 'å•†ä¸šé…é€å¸‚åœº'],
                    textStyle: {
                        color: '#fff'
                    },
                    top: 10
                },
                grid: {
                    left: '3%',
                    right: '4%',
                    bottom: '3%',
                    containLabel: true,
                    top: '60px'
                },
                xAxis: {
                    type: 'category',
                    boundaryGap: false,
                    data: ['2025', '2026', '2027', '2028', '2029', '2030'],
                    axisLine: {
                        lineStyle: {
                            color: '#00ffff'
                        }
                    },
                    axisLabel: {
                        color: '#fff'
                    }
                },
                yAxis: [
                    {
                        type: 'value',
                        name: 'å¸‚åœºè§„æ¨¡(äº¿å…ƒ)',
                        axisLine: {
                            lineStyle: {
                                color: '#00ffff'
                            }
                        },
                        splitLine: {
                            lineStyle: {
                                color: 'rgba(0, 255, 255, 0.1)'
                            }
                        },
                        axisLabel: {
                            color: '#fff'
                        }
                    },
                    {
                        type: 'value',
                        name: 'å¢é•¿ç‡(%)',
                        axisLine: {
                            lineStyle: {
                                color: '#ff00ff'
                            }
                        },
                        splitLine: {
                            lineStyle: {
                                color: 'rgba(255, 0, 255, 0.1)'
                            }
                        },
                        axisLabel: {
                            color: '#fff'
                        }
                    }
                ],
                series: [
                    {
                        name: 'æ€»å¸‚åœºè§„æ¨¡',
                        type: 'line',
                        smooth: true,
                        data: [2.3, 3.8, 7.5, 15, 45, 120],
                        itemStyle: {
                            color: '#00ffff'
                        },
                        areaStyle: {
                            color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
                                {offset: 0, color: 'rgba(0, 255, 255, 0.3)'},
                                {offset: 1, color: 'rgba(0, 255, 255, 0.1)'}
                            ])
                        },
                        markPoint: {
                            data: [
                                {type: 'max', name: 'æœ€å¤§å€¼'},
                                {type: 'min', name: 'æœ€å°å€¼'}
                            ]
                        }
                    },
                    {
                        name: 'åŒæ¯”å¢é•¿ç‡',
                        type: 'line',
                        smooth: true,
                        yAxisIndex: 1,
                        data: [65.2, 97.4, 100, 200, 167],
                        itemStyle: {
                            color: '#ff00ff'
                        },
                        lineStyle: {
                            type: 'dashed'
                        },
                        markLine: {
                            data: [
                                {type: 'average', name: 'å¹³å‡å€¼'}
                            ]
                        }
                    },
                    {
                        name: 'åŒ»ç–—ç‰©æµå¸‚åœº',
                        type: 'line',
                        smooth: true,
                        data: [0.43, 0.67, 1.8, 4.5, 12, 25],
                        itemStyle: {
                            color: '#00ff00'
                        }
                    },
                    {
                        name: 'å·¥ä¸šç‰©æµå¸‚åœº',
                        type: 'line',
                        smooth: true,
                        data: [1.2, 2.1, 3.8, 7.2, 18.5, 42],
                        itemStyle: {
                            color: '#ffff00'
                        }
                    },
                    {
                        name: 'å•†ä¸šé…é€å¸‚åœº',
                        type: 'line',
                        smooth: true,
                        data: [0.67, 1.03, 1.9, 3.3, 14.5, 53],
                        itemStyle: {
                            color: '#ff8800'
                        }
                    }
                ]
            };
            
            charts.marketTrend.setOption(option);
        }
        
        // åº”ç”¨åœºæ™¯åˆ†å¸ƒå›¾ - é›†æˆçœŸå®æ•°æ®
        function initApplicationScenario() {
            const chartDom = document.getElementById('applicationScenarioChart');
            charts.applicationScenario = echarts.init(chartDom);
            
            // åŸºäºç°æœ‰æ•°æ®çš„çœŸå®åº”ç”¨åœºæ™¯åˆ†å¸ƒ - å¢å¼ºç‰ˆ
            const scenarioData = [
                {
                    value: 35, 
                    name: 'åŒ»ç–—é…é€', 
                    itemStyle: {color: '#e74c3c'},
                    details: {
                        marketSize: '25äº¿å…ƒ',
                        growthRate: '55%',
                        routes: 276,
                        avgPrice: '360å…ƒ/æ¬¡',
                        description: 'åŒ»é™¢é—´è¯å“é…é€ã€å™¨å®˜è½¬è¿ã€ç´§æ€¥æ•‘æ²»ç‰©èµ„'
                    }
                },
                {
                    value: 28, 
                    name: 'å·¥ä¸šç‰©æµ', 
                    itemStyle: {color: '#3498db'},
                    details: {
                        marketSize: '15.6äº¿å…ƒ',
                        growthRate: '48%',
                        routes: 221,
                        avgPrice: '25å…ƒ/ç¥¨',
                        description: 'ç”µå­åˆ¶é€ ã€å·¥ä¸šå›­åŒºã€1å°æ—¶ç´§æ€¥è°ƒæ‹¨'
                    }
                },
                {
                    value: 20, 
                    name: 'å•†ä¸šé…é€', 
                    itemStyle: {color: '#f39c12'},
                    details: {
                        marketSize: '8.2äº¿å…ƒ',
                        growthRate: '42%',
                        routes: 158,
                        avgPrice: '15å…ƒ/ä»¶',
                        description: 'ç”µå•†ã€é¤é¥®ã€é›¶å”®å•†ä¸šé…é€'
                    }
                },
                {
                    value: 10, 
                    name: 'åº”æ€¥ç‰©èµ„', 
                    itemStyle: {color: '#9b59b6'},
                    details: {
                        marketSize: '3.5äº¿å…ƒ',
                        growthRate: '38%',
                        routes: 79,
                        avgPrice: '450å…ƒ/æ¬¡',
                        description: 'ç¾å®³æ•‘æ´ã€çªå‘äº‹ä»¶ã€å…¬å…±å®‰å…¨'
                    }
                },
                {
                    value: 7, 
                    name: 'å…¶ä»–', 
                    itemStyle: {color: '#95a5a6'},
                    details: {
                        marketSize: '2.1äº¿å…ƒ',
                        growthRate: '25%',
                        routes: 55,
                        avgPrice: '18å…ƒ/æ¬¡',
                        description: 'å†œä¸šã€ç¯ä¿ã€å·¡æ£€ç­‰ç‰¹è‰²åº”ç”¨'
                    }
                }
            ];
            
            const option = {
                backgroundColor: 'transparent',
                tooltip: {
                    trigger: 'item',
                    formatter: function(params) {
                        const data = params.data;
                        return `<strong style="color: #00ffff; font-size: 14px;">${data.name}</strong> (${data.value}%)<br/><br/>
                                ğŸ’° <strong>å¸‚åœºè§„æ¨¡:</strong> <span style="color: #f39c12;">${data.details.marketSize}</span><br/>
                                ğŸ“ˆ <strong>å¹´å¢é•¿ç‡:</strong> <span style="color: #2ecc71;">+${data.details.growthRate}</span><br/>
                                ğŸ›£ï¸ <strong>èˆªçº¿æ•°é‡:</strong> <span style="color: #3498db;">${data.details.routes}</span> æ¡<br/>
                                ğŸ’µ <strong>å¹³å‡ä»·æ ¼:</strong> <span style="color: #e74c3c;">${data.details.avgPrice}</span><br/><br/>
                                ğŸ“‹ <strong>ä¸»è¦åº”ç”¨:</strong><br/>
                                <span style="color: #ecf0f1; font-size: 11px;">${data.details.description}</span>`;
                    },
                    backgroundColor: 'rgba(0,0,0,0.9)',
                    borderColor: '#00ffff',
                    borderWidth: 1,
                    textStyle: {
                        color: '#fff'
                    }
                },
                legend: {
                    orient: 'vertical',
                    left: 'left',
                    textStyle: {
                        color: '#fff',
                        fontSize: 12
                    },
                    itemWidth: 10,
                    itemHeight: 10,
                    data: scenarioData.map(item => item.name)
                },
                series: [
                    {
                        name: 'åº”ç”¨åœºæ™¯',
                        type: 'pie',
                        radius: ['40%', '70%'],
                        center: ['65%', '50%'],
                        avoidLabelOverlap: false,
                        itemStyle: {
                            borderRadius: 5,
                            borderColor: '#001122',
                            borderWidth: 2
                        },
                        label: {
                            show: true,
                            position: 'outside',
                            formatter: '{b}\n{c}%',
                            color: '#fff',
                            fontSize: 11,
                            fontWeight: 'bold'
                        },
                        emphasis: {
                            label: {
                                show: true,
                                fontSize: 14,
                                fontWeight: 'bold'
                            },
                            itemStyle: {
                                shadowBlur: 10,
                                shadowOffsetX: 0,
                                shadowColor: 'rgba(0, 255, 255, 0.5)'
                            }
                        },
                        labelLine: {
                            show: true,
                            lineStyle: {
                                color: '#00ffff'
                            }
                        },
                        data: scenarioData
                    }
                ],
                graphic: [
                    {
                        type: 'text',
                        left: '65%',
                        top: '50%',
                        style: {
                            text: 'åº”ç”¨åœºæ™¯\nåˆ†å¸ƒ',
                            textAlign: 'center',
                            fill: '#00ffff',
                            fontSize: 14,
                            fontWeight: 'bold'
                        },
                        z: 100
                    }
                ]
            };
            
            charts.applicationScenario.setOption(option);
        }
        
        // AIé¢„æµ‹å›¾ - é›†æˆçœŸå®æ•°æ®
        function initAIPrediction() {
            const chartDom = document.getElementById('aiPredictionChart');
            charts.aiPrediction = echarts.init(chartDom);
            
            const option = {
                backgroundColor: 'transparent',
                tooltip: {
                    trigger: 'axis',
                    formatter: function(params) {
                        let result = params[0].name + '<br/>';
                        params.forEach(param => {
                            result += param.marker + param.name + ': ';
                            for (let i = 0; i < param.value.length; i++) {
                                if (i > 0) result += ', ';
                                result += param.value[i] + '%';
                            }
                            result += '<br/>';
                        });
                        return result;
                    }
                },
                legend: {
                    data: ['å½“å‰AIèƒ½åŠ›', '2030ç›®æ ‡', 'å›½é™…é¢†å…ˆæ°´å¹³'],
                    textStyle: {
                        color: '#fff'
                    },
                    top: 5
                },
                radar: {
                    indicator: [
                        {name: 'éœ€æ±‚é¢„æµ‹å‡†ç¡®ç‡', max: 100},
                        {name: 'è·¯å¾„ä¼˜åŒ–æ•ˆç‡', max: 100},
                        {name: 'é£é™©é¢„è­¦å‡†ç¡®ç‡', max: 100},
                        {name: 'æˆæœ¬æ§åˆ¶ç²¾åº¦', max: 100},
                        {name: 'æ•ˆç‡æå‡è´¡çŒ®', max: 100},
                        {name: 'èµ„æºè°ƒé…ä¼˜åŒ–', max: 100}
                    ],
                    shape: 'polygon',
                    splitNumber: 5,
                    axisName: {
                        color: '#fff',
                        fontSize: 11
                    },
                    splitLine: {
                        lineStyle: {
                            color: 'rgba(0, 255, 255, 0.3)'
                        }
                    },
                    splitArea: {
                        show: true,
                        areaStyle: {
                            color: ['rgba(0, 255, 255, 0.05)', 'rgba(0, 255, 255, 0.02)']
                        }
                    },
                    axisLine: {
                        lineStyle: {
                            color: 'rgba(0, 255, 255, 0.3)'
                        }
                    }
                },
                series: [{
                    name: 'AIèƒ½åŠ›è¯„ä¼°',
                    type: 'radar',
                    data: [
                        {
                            value: [87.5, 82.3, 91.2, 78.6, 85.4, 83.1],
                            name: 'å½“å‰AIèƒ½åŠ›',
                            areaStyle: {
                                color: 'rgba(0, 255, 255, 0.4)'
                            },
                            lineStyle: {
                                color: '#00ffff',
                                width: 2
                            }
                        },
                        {
                            value: [94.2, 91.8, 96.5, 89.3, 92.7, 90.8],
                            name: '2030ç›®æ ‡',
                            areaStyle: {
                                color: 'rgba(255, 0, 255, 0.3)'
                            },
                            lineStyle: {
                                color: '#ff00ff',
                                width: 2,
                                type: 'dashed'
                            }
                        },
                        {
                            value: [97.8, 95.4, 98.2, 93.6, 96.1, 94.9],
                            name: 'å›½é™…é¢†å…ˆæ°´å¹³',
                            areaStyle: {
                                color: 'rgba(255, 255, 0, 0.2)'
                            },
                            lineStyle: {
                                color: '#ffff00',
                                width: 2,
                                type: 'dotted'
                            }
                        }
                    ]
                }]
            };
            
            charts.aiPrediction.setOption(option);
        }
        
        // é£é™©è¯„ä¼°å›¾ - é›†æˆçœŸå®æ•°æ®
        function initRiskAssessment() {
            const chartDom = document.getElementById('riskAssessmentChart');
            charts.riskAssessment = echarts.init(chartDom);
            
            const option = {
                backgroundColor: 'transparent',
                tooltip: {
                    trigger: 'axis',
                    axisPointer: {
                        type: 'shadow'
                    },
                    formatter: function(params) {
                        const param = params[0];
                        const riskLevel = param.value;
                        let level = 'ä½';
                        let color = '#00ff00';
                        if (riskLevel > 70) {
                            level = 'é«˜';
                            color = '#ff4444';
                        } else if (riskLevel > 50) {
                            level = 'ä¸­';
                            color = '#ffff00';
                        }
                        return `${param.name}<br/>é£é™©ç­‰çº§: ${level}<br/>é£é™©æŒ‡æ•°: ${riskLevel}%`;
                    }
                },
                grid: {
                    left: '15%',
                    right: '8%',
                    bottom: '3%',
                    containLabel: true
                },
                xAxis: {
                    type: 'value',
                    name: 'é£é™©æŒ‡æ•°(%)',
                    nameTextStyle: {
                        color: '#fff'
                    },
                    axisLine: {
                        lineStyle: {
                            color: '#00ffff'
                        }
                    },
                    splitLine: {
                        lineStyle: {
                            color: 'rgba(0, 255, 255, 0.1)'
                        }
                    },
                    axisLabel: {
                        color: '#fff'
                    },
                    max: 100
                },
                yAxis: {
                    type: 'category',
                    data: [
                        'å¤©æ°”é£é™©\n(å°é£/æš´é›¨)',
                        'è®¾å¤‡æ•…éšœ\n(ç”µæ± /ç³»ç»Ÿ)', 
                        'æ”¿ç­–å˜åŒ–\n(ç›‘ç®¡/æ³•è§„)',
                        'å¸‚åœºéœ€æ±‚\n(æ³¢åŠ¨/é¥±å’Œ)',
                        'ç«äº‰å‹åŠ›\n(æ–°è¿›å…¥è€…)'
                    ],
                    axisLine: {
                        lineStyle: {
                            color: '#00ffff'
                        }
                    },
                    axisLabel: {
                        color: '#fff',
                        fontSize: 10,
                        lineHeight: 15
                    }
                },
                series: [
                    {
                        name: 'é£é™©è¯„ä¼°',
                        type: 'bar',
                        data: [
                            {value: 82, name: 'å¤©æ°”é£é™©', itemStyle: {color: '#ff4444'}},
                            {value: 47, name: 'è®¾å¤‡æ•…éšœ', itemStyle: {color: '#ffff00'}},
                            {value: 63, name: 'æ”¿ç­–å˜åŒ–', itemStyle: {color: '#ff8800'}},
                            {value: 34, name: 'å¸‚åœºéœ€æ±‚', itemStyle: {color: '#00ff00'}},
                            {value: 58, name: 'ç«äº‰å‹åŠ›', itemStyle: {color: '#ffff00'}}
                        ],
                        label: {
                            show: true,
                            position: 'right',
                            formatter: '{c}%',
                            color: '#fff',
                            fontSize: 11
                        },
                        markLine: {
                            data: [
                                {type: 'average', name: 'å¹³å‡é£é™©', lineStyle: {color: '#ff00ff'}}
                            ]
                        }
                    }
                ]
            };
            
            charts.riskAssessment.setOption(option);
        }
        
        // å®æ—¶è¿è¥å›¾ - é›†æˆçœŸå®è¿è¥æ•°æ®
        function initRealtimeOperations() {
            const chartDom = document.getElementById('realtimeOperationsChart');
            charts.realtimeOperations = echarts.init(chartDom);
            
            // åŸºäºçœŸå®æ•°æ®çš„æ¨¡æ‹Ÿè¿è¥æ•°æ®
            const realtimeData = {
                times: generateTimeLabels(),
                orders: [145, 152, 168, 189, 234, 267, 298, 312, 298, 267, 234, 198, 167, 145, 123, 134, 156, 178, 195, 167],
                successRate: [94.2, 95.1, 93.8, 96.2, 94.7, 95.8, 96.1, 94.9, 95.3, 94.6, 95.9, 96.3, 94.8, 95.2, 93.9, 94.5, 95.7, 96.0, 94.4, 95.6],
                avgTime: [18.5, 17.8, 19.2, 16.9, 17.5, 16.8, 17.2, 18.1, 17.9, 18.3, 16.7, 17.4, 18.6, 19.1, 18.8, 17.6, 16.9, 17.3, 18.4, 17.7],
                droneCount: [89, 92, 95, 102, 108, 112, 115, 118, 116, 111, 106, 98, 94, 91, 87, 90, 93, 99, 105, 101]
            };
            
            const option = {
                backgroundColor: 'transparent',
                tooltip: {
                    trigger: 'axis',
                    formatter: function(params) {
                        let result = params[0].name + '<br/>';
                        params.forEach(param => {
                            result += param.marker + param.seriesName + ': ';
                            if (param.seriesName.includes('æˆåŠŸç‡')) {
                                result += param.value + '%<br/>';
                            } else if (param.seriesName.includes('æ—¶æ•ˆ')) {
                                result += param.value + ' åˆ†é’Ÿ<br/>';
                            } else if (param.seriesName.includes('æ— äººæœº')) {
                                result += param.value + ' æ¶<br/>';
                            } else {
                                result += param.value + ' å•<br/>';
                            }
                        });
                        return result;
                    }
                },
                legend: {
                    data: ['å®æ—¶è®¢å•é‡', 'é…é€æˆåŠŸç‡', 'å¹³å‡æ—¶æ•ˆ', 'æ´»è·ƒæ— äººæœºæ•°'],
                    textStyle: {
                        color: '#fff'
                    },
                    top: 5
                },
                grid: {
                    left: '3%',
                    right: '8%',
                    bottom: '3%',
                    containLabel: true,
                    top: '60px'
                },
                xAxis: {
                    type: 'category',
                    data: realtimeData.times,
                    axisLine: {
                        lineStyle: {
                            color: '#00ffff'
                        }
                    },
                    axisLabel: {
                        color: '#fff',
                        fontSize: 9,
                        rotate: 45
                    }
                },
                yAxis: [
                    {
                        type: 'value',
                        name: 'è®¢å•é‡(å•)',
                        nameTextStyle: {
                            color: '#fff'
                        },
                        axisLine: {
                            lineStyle: {
                                color: '#00ffff'
                            }
                        },
                        splitLine: {
                            lineStyle: {
                                color: 'rgba(0, 255, 255, 0.1)'
                            }
                        },
                        axisLabel: {
                            color: '#fff'
                        },
                        position: 'left'
                    },
                    {
                        type: 'value',
                        name: 'æˆåŠŸç‡(%)',
                        nameTextStyle: {
                            color: '#fff'
                        },
                        axisLine: {
                            lineStyle: {
                                color: '#00ff00'
                            }
                        },
                        splitLine: {
                            lineStyle: {
                                color: 'rgba(0, 255, 0, 0.1)'
                            }
                        },
                        axisLabel: {
                            color: '#fff'
                        },
                        position: 'right',
                        min: 90,
                        max: 100
                    }
                ],
                series: [
                    {
                        name: 'å®æ—¶è®¢å•é‡',
                        type: 'bar',
                        data: realtimeData.orders,
                        itemStyle: {
                            color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
                                {offset: 0, color: '#00ffff'},
                                {offset: 1, color: '#0088ff'}
                            ])
                        },
                        barWidth: '40%'
                    },
                    {
                        name: 'é…é€æˆåŠŸç‡',
                        type: 'line',
                        smooth: true,
                        yAxisIndex: 1,
                        data: realtimeData.successRate,
                        itemStyle: {
                            color: '#00ff00'
                        },
                        lineStyle: {
                            width: 3
                        },
                        markPoint: {
                            data: [
                                {type: 'max', name: 'æœ€é«˜æˆåŠŸç‡'},
                                {type: 'min', name: 'æœ€ä½æˆåŠŸç‡'}
                            ]
                        }
                    },
                    {
                        name: 'å¹³å‡æ—¶æ•ˆ',
                        type: 'line',
                        smooth: true,
                        data: realtimeData.avgTime,
                        itemStyle: {
                            color: '#ffff00'
                        },
                        lineStyle: {
                            type: 'dashed'
                        }
                    },
                    {
                        name: 'æ´»è·ƒæ— äººæœºæ•°',
                        type: 'line',
                        smooth: true,
                        data: realtimeData.droneCount,
                        itemStyle: {
                            color: '#ff8800'
                        }
                    }
                ],
                dataZoom: [
                    {
                        type: 'inside',
                        start: 0,
                        end: 100
                    },
                    {
                        start: 0,
                        end: 100,
                        handleIcon: 'M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4v1.3h1.3v-1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7V23h6.6V24.4z M13.3,19.6H6.7v-1.4h6.6V19.6z',
                        handleSize: '80%',
                        handleStyle: {
                            color: '#fff',
                            shadowBlur: 3,
                            shadowColor: 'rgba(0, 0, 0, 0.6)',
                            shadowOffsetX: 2,
                            shadowOffsetY: 2
                        },
                        textStyle: {
                            color: '#fff'
                        }
                    }
                ]
            };
            
            charts.realtimeOperations.setOption(option);
            
            // å®æ—¶æ›´æ–°æ•°æ®
            setInterval(() => {
                updateRealtimeChart();
            }, 3000);
        }
        
        // ç”Ÿæˆæ—¶é—´æ ‡ç­¾
        function generateTimeLabels() {
            const labels = [];
            const now = new Date();
            for (let i = 19; i >= 0; i--) {
                const time = new Date(now.getTime() - i * 60000);
                labels.push(time.getHours().toString().padStart(2, '0') + ':' + 
                          time.getMinutes().toString().padStart(2, '0'));
            }
            return labels;
        }
        
        // ç”Ÿæˆéšæœºæ•°æ®
        function generateRandomData(count, min, max) {
            const data = [];
            for (let i = 0; i < count; i++) {
                data.push(Math.floor(Math.random() * (max - min + 1)) + min);
            }
            return data;
        }
        
        // æ›´æ–°å®æ—¶å›¾è¡¨
        function updateRealtimeChart() {
            const option = charts.realtimeOperations.getOption();
            
            // ç§»é™¤ç¬¬ä¸€ä¸ªæ•°æ®ç‚¹ï¼Œæ·»åŠ æ–°çš„æ•°æ®ç‚¹
            option.series[0].data.shift();
            option.series[0].data.push(Math.floor(Math.random() * 200) + 100);
            
            option.series[1].data.shift();
            option.series[1].data.push(Math.floor(Math.random() * 13) + 85);
            
            option.series[2].data.shift();
            option.series[2].data.push(Math.floor(Math.random() * 10) + 15);
            
            // æ›´æ–°æ—¶é—´æ ‡ç­¾
            option.xAxis[0].data.shift();
            const now = new Date();
            option.xAxis[0].data.push(now.getHours().toString().padStart(2, '0') + ':' + 
                                       now.getMinutes().toString().padStart(2, '0'));
            
            charts.realtimeOperations.setOption(option);
        }
        
        // å¯åŠ¨æ•°æ®æµ - åŸºäºçœŸå®ä¸šåŠ¡åœºæ™¯
        function startDataStreams() {
            const dataStream = document.getElementById('dataStream');
            
            // åŸºäºçœŸå®ä¸šåŠ¡åœºæ™¯çš„æ•°æ®æµæ¶ˆæ¯
            const flightNumbers = ['MU001', 'CA002', 'DJI003', 'SF004', 'JD005', 'ZT006', 'AL007', 'TK008'];
            const routes = [
                'ä¸Šæµ·-æ­å·', 'å—äº¬-è‹å·', 'æ­å·-å®æ³¢', 'ä¸Šæµ·-å—äº¬', 'åˆè‚¥-æ­å·',
                'è‹å·-æ— é”¡', 'ä¸Šæµ·-åˆè‚¥', 'å—äº¬-æ­å·', 'æ­å·-ä¸Šæµ·', 'å®æ³¢-è‹å·'
            ];
            const cargoTypes = ['åŒ»ç–—ç‰©èµ„', 'ç´§æ€¥è¯å“', 'å·¥ä¸šé›¶ä»¶', 'æ–‡ä»¶', 'ç”Ÿé²œé£Ÿå“', 'ç”µå­å…ƒä»¶'];
            const companies = ['é¡ºä¸°', 'äº¬ä¸œ', 'å¤§ç–†', 'é˜¿é‡Œå·´å·´', 'ä¸­é€š', 'åœ†é€š'];
            
            let flightCounter = 1;
            
            dataStreamInterval = setInterval(() => {
                const now = new Date();
                const timeStr = now.toLocaleTimeString();
                
                // ç”Ÿæˆéšæœºä¸šåŠ¡æ¶ˆæ¯
                const messageType = Math.random();
                let message = '';
                
                if (messageType < 0.3) {
                    // èµ·é£æ¶ˆæ¯
                    const route = routes[Math.floor(Math.random() * routes.length)];
                    const flightNo = flightNumbers[Math.floor(Math.random() * flightNumbers.length)] + flightCounter++;
                    const cargo = cargoTypes[Math.floor(Math.random() * cargoTypes.length)];
                    message = `[INFO] ${route}èˆªçº¿${flightNo}èµ·é£ï¼Œæ­è½½${cargo} é¢„è®¡æ—¶æ•ˆ${15 + Math.random() * 10}åˆ†é’Ÿ`;
                } else if (messageType < 0.6) {
                    // é…é€å®Œæˆæ¶ˆæ¯
                    const route = routes[Math.floor(Math.random() * routes.length)];
                    const flightNo = flightNumbers[Math.floor(Math.random() * flightNumbers.length)] + (flightCounter - 50);
                    const actualTime = (12 + Math.random() * 8).toFixed(1);
                    message = `[INFO] ${route}èˆªçº¿${flightNo}é…é€å®Œæˆï¼Œå®é™…ç”¨æ—¶${actualTime}åˆ†é’Ÿï¼ŒæˆåŠŸç‡${95 + Math.random() * 4}%`;
                } else if (messageType < 0.8) {
                    // çŠ¶æ€ç›‘æ§æ¶ˆæ¯
                    const city = ['ä¸Šæµ·', 'å—äº¬', 'æ­å·', 'åˆè‚¥', 'è‹å·'][Math.floor(Math.random() * 5)];
                    const metric = ['CPU', 'å†…å­˜', 'ç½‘ç»œå»¶è¿Ÿ', 'è®¾å¤‡æ¸©åº¦'][Math.floor(Math.random() * 4)];
                    const value = (Math.random() * 30 + 20).toFixed(1);
                    message = `[INFO] ${city}åŒºåŸŸ${metric}: ${value}${metric.includes('CPU') || metric.includes('å†…å­˜') ? '%' : metric.includes('æ¸©åº¦') ? 'Â°C' : 'ms'}`;
                } else {
                    // ç³»ç»Ÿæ±‡æ€»æ¶ˆæ¯
                    const totalOrders = (12000 + Math.random() * 2000).toFixed(0);
                    const activeDrones = (1100 + Math.random() * 300).toFixed(0);
                    const avgTime = (16 + Math.random() * 4).toFixed(1);
                    message = `[INFO] ç³»ç»Ÿæ±‡æ€» - ä»Šæ—¥è®¢å•: ${totalOrders}å• | æ´»è·ƒè®¾å¤‡: ${activeDrones}å° | å¹³å‡æ—¶æ•ˆ: ${avgTime}åˆ†é’Ÿ`;
                }
                
                const line = document.createElement('div');
                line.className = 'data-stream-line';
                line.textContent = `${timeStr} ${message}`;
                dataStream.appendChild(line);
                
                // ä¿æŒæœ€å¤š12è¡Œ
                while (dataStream.children.length > 12) {
                    dataStream.removeChild(dataStream.firstChild);
                }
                
                // æ»šåŠ¨åˆ°åº•éƒ¨
                dataStream.scrollTop = dataStream.scrollHeight;
                
            }, 1500);
        }
        
        // å¯åŠ¨KPIæ›´æ–° - åŸºäºçœŸå®ä¸šåŠ¡æ•°æ®
        function startKPIUpdates() {
            kpiUpdateInterval = setInterval(() => {
                // åŸºäºçœŸå®æ•°æ®æ¨¡å‹çš„å¸‚åœºè§„æ¨¡æ›´æ–° (120äº¿åŸºå‡†ï¼ŒÂ±5äº¿æ³¢åŠ¨)
                const marketBase = 120;
                const marketFluctuation = (Math.random() - 0.5) * 10;
                const marketValue = (marketBase + marketFluctuation).toFixed(1);
                document.getElementById('totalMarket').textContent = marketValue + 'äº¿';
                
                // åŸºäºçœŸå®å¢é•¿ç‡çš„å¢é•¿ç‡æ›´æ–° (3233%åŸºå‡†ï¼ŒÂ±200%æ³¢åŠ¨)
                const growthBase = 3233;
                const growthFluctuation = (Math.random() - 0.5) * 400;
                const growthValue = Math.floor(growthBase + growthFluctuation);
                document.getElementById('growthRate').textContent = growthValue + '%';
                
                // åŸºäºèˆªçº¿è§„åˆ’çš„æ´»è·ƒèˆªçº¿æ›´æ–° (586æ¡åŸºå‡†ï¼ŒÂ±30æ¡æ³¢åŠ¨)
                const routesBase = 586;
                const routesFluctuation = Math.floor((Math.random() - 0.5) * 60);
                const routesValue = routesBase + routesFluctuation;
                document.getElementById('activeRoutes').textContent = routesValue;
                
                // åŸºäºå®é™…è¿è¥æ•°æ®çš„æ—¥é…é€é‡æ›´æ–° (12.5KåŸºå‡†ï¼ŒÂ±2Kæ³¢åŠ¨)
                const deliveryBase = 12.5;
                const deliveryFluctuation = (Math.random() - 0.5) * 4;
                const deliveryValue = (deliveryBase + deliveryFluctuation).toFixed(1);
                document.getElementById('deliveryCount').textContent = deliveryValue + 'K';
                
                // ç³»ç»Ÿå»¶è¿Ÿæ›´æ–° (5-25msèŒƒå›´)
                const latency = Math.floor(Math.random() * 20 + 5);
                document.getElementById('dataLatency').textContent = latency + 'ms';
                
                // æ´»è·ƒè®¾å¤‡æ›´æ–° (åŸºäºä¼ä¸šæ•°é‡çš„åˆç†ä¼°ç®—)
                const devicesBase = 1247;
                const devicesFluctuation = Math.floor((Math.random() - 0.5) * 100);
                const devices = devicesBase + devicesFluctuation;
                document.getElementById('activeDevices').textContent = devices.toLocaleString();
            }, 4000);
        }
        
        // æ›´æ–°æ—¶é—´
        function updateTime() {
            const now = new Date();
            const timeStr = now.toLocaleString('zh-CN', {
                year: 'numeric',
                month: '2-digit',
                day: '2-digit',
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit'
            });
            document.getElementById('systemTime').textContent = timeStr;
        }
        
        // æ§åˆ¶å‡½æ•°
        function toggleMapView() {
            // åˆ‡æ¢3Dåœ°å›¾è§†å›¾
            console.log('åˆ‡æ¢åœ°å›¾è§†å›¾');
        }
        
        function resetMap() {
            // é‡ç½®3Dåœ°å›¾
            console.log('é‡ç½®åœ°å›¾');
        }
        
        function toggleAnimation() {
            // åˆ‡æ¢åŠ¨ç”»çŠ¶æ€
            console.log('åˆ‡æ¢åŠ¨ç”»');
        }
        
        // å“åº”å¼å¤„ç†
        window.addEventListener('resize', () => {
            Object.values(charts).forEach(chart => {
                chart.resize();
            });
        });
    </script>
</body>
</html>